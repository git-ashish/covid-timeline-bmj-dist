var ki=Object.create;var He=Object.defineProperty,Ni=Object.defineProperties,Ei=Object.getOwnPropertyDescriptor,$i=Object.getOwnPropertyDescriptors,Fi=Object.getOwnPropertyNames,Ln=Object.getOwnPropertySymbols,Ui=Object.getPrototypeOf,Hn=Object.prototype.hasOwnProperty,Li=Object.prototype.propertyIsEnumerable;var In=(t,e,n)=>e in t?He(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ze=(t,e)=>{for(var n in e||(e={}))Hn.call(e,n)&&In(t,n,e[n]);if(Ln)for(var n of Ln(e))Li.call(e,n)&&In(t,n,e[n]);return t},Oe=(t,e)=>Ni(t,$i(e));var Ii=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Fi(e))!Hn.call(t,i)&&i!==n&&He(t,i,{get:()=>e[i],enumerable:!(r=Ei(e,i))||r.enumerable});return t};var Hi=(t,e,n)=>(n=t!=null?ki(Ui(t)):{},Ii(e||!t||!t.__esModule?He(n,"default",{value:t,enumerable:!0}):n,t));function $u(){Promise.resolve().then(()=>Hi(require("data:text/javascript,")))}const zi=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};zi();const vt={blue:"#2A6EBB",lightBlue:"#6DCAF3",yellow:"#F0AB00",orange:"#E37222",red:"#CD202C",pink:"#C31884",purple:"#765FA8",aqua:"#00B2A9",green:"#69BE28",silver:"#7C8696"},Oi=["hospAdData","infectionsurvey","nationdeaths"],Et=["England","Wales","Scotland","Northern Ireland"];function xt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ne(t){let e,n,r;t.length!==2?(e=xt,n=(c,s)=>xt(t(c),s),r=(c,s)=>t(c)-s):(e=t===xt||t===Yi?t:Ri,n=t,r=t);function i(c,s,u=0,l=c.length){if(u<l){if(e(s,s)!==0)return l;do{const f=u+l>>>1;n(c[f],s)<0?u=f+1:l=f}while(u<l)}return u}function a(c,s,u,l){if(u<l){if(e(s,s)!==0)return l;do{const f=u+l>>>1;n(c[f],s)<=0?u=f+1:l=f}while(u<l)}return u}function o(c,s,u,l){const f=i(c,s,u,l-1);return f>u&&r(c[f-1],s)>-r(c[f],s)?f-1:f}return{left:i,center:o,right:a}}function Ri(){return 0}function Wi(t){return t===null?NaN:+t}const Pi=Ne(xt),Vi=Pi.right;Ne(Wi).center;var qi=Vi;class zn extends Map{constructor(e,n=Zi){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(On(this,e))}has(e){return super.has(On(this,e))}set(e,n){return super.set(Bi(this,e),n)}delete(e){return super.delete(Xi(this,e))}}function On({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Bi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Xi({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Zi(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Qi(t){if(t===xt)return Cr;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Cr(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var Je=Math.sqrt(50),Ke=Math.sqrt(10),je=Math.sqrt(2);function Gi(t,e,n){var r,i=-1,a,o,c;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(a=t,t=e,e=a),(c=br(t,e,n))===0||!isFinite(c))return[];if(c>0){let s=Math.round(t/c),u=Math.round(e/c);for(s*c<t&&++s,u*c>e&&--u,o=new Array(a=u-s+1);++i<a;)o[i]=(s+i)*c}else{c=-c;let s=Math.round(t*c),u=Math.round(e*c);for(s/c<t&&++s,u/c>e&&--u,o=new Array(a=u-s+1);++i<a;)o[i]=(s+i)/c}return r&&o.reverse(),o}function br(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Je?10:a>=Ke?5:a>=je?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Je?10:a>=Ke?5:a>=je?2:1)}function tn(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Je?i*=10:a>=Ke?i*=5:a>=je&&(i*=2),e<t?-i:i}function Tr(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Sr(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Ji(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=xt);const i=(c,s)=>e(n[c],n[s]);let a,o;return Uint32Array.from(n,(c,s)=>s).sort(e===xt?(c,s)=>Cr(n[c],n[s]):Qi(i)).forEach((c,s)=>{const u=i(c,a===void 0?c:a);u>=0?((a===void 0||u>0)&&(a=c,o=s),r[c]=o):r[c]=NaN}),r}var Ki={value:()=>{}};function gn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new pe(n)}function pe(t){this._=t}function ji(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}pe.prototype=gn.prototype={constructor:pe,on:function(t,e){var n=this._,r=ji(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=t0(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Yn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Yn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new pe(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function t0(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Yn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ki,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var en="http://www.w3.org/1999/xhtml",Rn={svg:"http://www.w3.org/2000/svg",xhtml:en,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ee(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Rn.hasOwnProperty(e)?{space:Rn[e],local:t}:t}function e0(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===en&&e.documentElement.namespaceURI===en?e.createElement(t):e.createElementNS(n,t)}}function n0(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Dr(t){var e=Ee(t);return(e.local?n0:e0)(e)}function r0(){}function mn(t){return t==null?r0:function(){return this.querySelector(t)}}function i0(t){typeof t!="function"&&(t=mn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=new Array(o),s,u,l=0;l<o;++l)(s=a[l])&&(u=t.call(s,s.__data__,l,a))&&("__data__"in s&&(u.__data__=s.__data__),c[l]=u);return new q(r,this._parents)}function Ar(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function a0(){return[]}function kr(t){return t==null?a0:function(){return this.querySelectorAll(t)}}function o0(t){return function(){return Ar(t.apply(this,arguments))}}function c0(t){typeof t=="function"?t=o0(t):t=kr(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],c=o.length,s,u=0;u<c;++u)(s=o[u])&&(r.push(t.call(s,s.__data__,u,o)),i.push(s));return new q(r,i)}function Nr(t){return function(){return this.matches(t)}}function Er(t){return function(e){return e.matches(t)}}var s0=Array.prototype.find;function u0(t){return function(){return s0.call(this.children,t)}}function l0(){return this.firstElementChild}function f0(t){return this.select(t==null?l0:u0(typeof t=="function"?t:Er(t)))}var h0=Array.prototype.filter;function p0(){return Array.from(this.children)}function d0(t){return function(){return h0.call(this.children,t)}}function g0(t){return this.selectAll(t==null?p0:d0(typeof t=="function"?t:Er(t)))}function m0(t){typeof t!="function"&&(t=Nr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=[],s,u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&c.push(s);return new q(r,this._parents)}function $r(t){return new Array(t.length)}function y0(){return new q(this._enter||this._groups.map($r),this._parents)}function ye(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ye.prototype={constructor:ye,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function v0(t){return function(){return t}}function w0(t,e,n,r,i,a){for(var o=0,c,s=e.length,u=a.length;o<u;++o)(c=e[o])?(c.__data__=a[o],r[o]=c):n[o]=new ye(t,a[o]);for(;o<s;++o)(c=e[o])&&(i[o]=c)}function x0(t,e,n,r,i,a,o){var c,s,u=new Map,l=e.length,f=a.length,h=new Array(l),g;for(c=0;c<l;++c)(s=e[c])&&(h[c]=g=o.call(s,s.__data__,c,e)+"",u.has(g)?i[c]=s:u.set(g,s));for(c=0;c<f;++c)g=o.call(t,a[c],c,a)+"",(s=u.get(g))?(r[c]=s,s.__data__=a[c],u.delete(g)):n[c]=new ye(t,a[c]);for(c=0;c<l;++c)(s=e[c])&&u.get(h[c])===s&&(i[c]=s)}function _0(t){return t.__data__}function M0(t,e){if(!arguments.length)return Array.from(this,_0);var n=e?x0:w0,r=this._parents,i=this._groups;typeof t!="function"&&(t=v0(t));for(var a=i.length,o=new Array(a),c=new Array(a),s=new Array(a),u=0;u<a;++u){var l=r[u],f=i[u],h=f.length,g=C0(t.call(l,l&&l.__data__,u,r)),w=g.length,x=c[u]=new Array(w),C=o[u]=new Array(w),N=s[u]=new Array(h);n(l,f,x,C,N,g,e);for(var I=0,b=0,U,F;I<w;++I)if(U=x[I]){for(I>=b&&(b=I+1);!(F=C[b])&&++b<w;);U._next=F||null}}return o=new q(o,r),o._enter=c,o._exit=s,o}function C0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function b0(){return new q(this._exit||this._groups.map($r),this._parents)}function T0(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function S0(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),c=new Array(i),s=0;s<o;++s)for(var u=n[s],l=r[s],f=u.length,h=c[s]=new Array(f),g,w=0;w<f;++w)(g=u[w]||l[w])&&(h[w]=g);for(;s<i;++s)c[s]=n[s];return new q(c,this._parents)}function D0(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function A0(t){t||(t=k0);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],c=o.length,s=i[a]=new Array(c),u,l=0;l<c;++l)(u=o[l])&&(s[l]=u);s.sort(e)}return new q(i,this._parents).order()}function k0(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function N0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function E0(){return Array.from(this)}function $0(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function F0(){let t=0;for(const e of this)++t;return t}function U0(){return!this.node()}function L0(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,c;a<o;++a)(c=i[a])&&t.call(c,c.__data__,a,i);return this}function I0(t){return function(){this.removeAttribute(t)}}function H0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function z0(t,e){return function(){this.setAttribute(t,e)}}function O0(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Y0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function R0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function W0(t,e){var n=Ee(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?H0:I0:typeof e=="function"?n.local?R0:Y0:n.local?O0:z0)(n,e))}function Fr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function P0(t){return function(){this.style.removeProperty(t)}}function V0(t,e,n){return function(){this.style.setProperty(t,e,n)}}function q0(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function B0(t,e,n){return arguments.length>1?this.each((e==null?P0:typeof e=="function"?q0:V0)(t,e,n==null?"":n)):Ut(this.node(),t)}function Ut(t,e){return t.style.getPropertyValue(e)||Fr(t).getComputedStyle(t,null).getPropertyValue(e)}function X0(t){return function(){delete this[t]}}function Z0(t,e){return function(){this[t]=e}}function Q0(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function G0(t,e){return arguments.length>1?this.each((e==null?X0:typeof e=="function"?Q0:Z0)(t,e)):this.node()[t]}function Ur(t){return t.trim().split(/^|\s+/)}function yn(t){return t.classList||new Lr(t)}function Lr(t){this._node=t,this._names=Ur(t.getAttribute("class")||"")}Lr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ir(t,e){for(var n=yn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Hr(t,e){for(var n=yn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function J0(t){return function(){Ir(this,t)}}function K0(t){return function(){Hr(this,t)}}function j0(t,e){return function(){(e.apply(this,arguments)?Ir:Hr)(this,t)}}function ta(t,e){var n=Ur(t+"");if(arguments.length<2){for(var r=yn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?j0:e?J0:K0)(n,e))}function ea(){this.textContent=""}function na(t){return function(){this.textContent=t}}function ra(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function ia(t){return arguments.length?this.each(t==null?ea:(typeof t=="function"?ra:na)(t)):this.node().textContent}function aa(){this.innerHTML=""}function oa(t){return function(){this.innerHTML=t}}function ca(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function sa(t){return arguments.length?this.each(t==null?aa:(typeof t=="function"?ca:oa)(t)):this.node().innerHTML}function ua(){this.nextSibling&&this.parentNode.appendChild(this)}function la(){return this.each(ua)}function fa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ha(){return this.each(fa)}function pa(t){var e=typeof t=="function"?t:Dr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function da(){return null}function ga(t,e){var n=typeof t=="function"?t:Dr(t),r=e==null?da:typeof e=="function"?e:mn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ma(){var t=this.parentNode;t&&t.removeChild(this)}function ya(){return this.each(ma)}function va(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wa(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xa(t){return this.select(t?wa:va)}function _a(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ma(t){return function(e){t.call(this,e,this.__data__)}}function Ca(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ba(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Ta(t,e,n){return function(){var r=this.__on,i,a=Ma(e);if(r){for(var o=0,c=r.length;o<c;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Sa(t,e,n){var r=Ca(t+""),i,a=r.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var s=0,u=c.length,l;s<u;++s)for(i=0,l=c[s];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(c=e?Ta:ba,i=0;i<a;++i)this.each(c(r[i],e,n));return this}function zr(t,e,n){var r=Fr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Da(t,e){return function(){return zr(this,t,e)}}function Aa(t,e){return function(){return zr(this,t,e.apply(this,arguments))}}function ka(t,e){return this.each((typeof e=="function"?Aa:Da)(t,e))}function*Na(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var vn=[null];function q(t,e){this._groups=t,this._parents=e}function te(){return new q([[document.documentElement]],vn)}function Ea(){return this}q.prototype=te.prototype={constructor:q,select:i0,selectAll:c0,selectChild:f0,selectChildren:g0,filter:m0,data:M0,enter:y0,exit:b0,join:T0,merge:S0,selection:Ea,order:D0,sort:A0,call:N0,nodes:E0,node:$0,size:F0,empty:U0,each:L0,attr:W0,style:B0,property:G0,classed:ta,text:ia,html:sa,raise:la,lower:ha,append:pa,insert:ga,remove:ya,clone:xa,datum:_a,on:Sa,dispatch:ka,[Symbol.iterator]:Na};function Mt(t){return typeof t=="string"?new q([[document.querySelector(t)]],[document.documentElement]):new q([[t]],vn)}function Wn(t){return typeof t=="string"?new q([document.querySelectorAll(t)],[document.documentElement]):new q([Ar(t)],vn)}function wn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Or(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ee(){}var Gt=.7,ve=1/Gt,$t="\\s*([+-]?\\d+)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$a=/^#([0-9a-f]{3,8})$/,Fa=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),Ua=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),La=new RegExp(`^rgba\\(${$t},${$t},${$t},${Jt}\\)$`),Ia=new RegExp(`^rgba\\(${it},${it},${it},${Jt}\\)$`),Ha=new RegExp(`^hsl\\(${Jt},${it},${it}\\)$`),za=new RegExp(`^hsla\\(${Jt},${it},${it},${Jt}\\)$`),Pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wn(ee,Ct,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Vn,formatHex:Vn,formatHex8:Oa,formatHsl:Ya,formatRgb:qn,toString:qn});function Vn(){return this.rgb().formatHex()}function Oa(){return this.rgb().formatHex8()}function Ya(){return Yr(this).formatHsl()}function qn(){return this.rgb().formatRgb()}function Ct(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$a.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Bn(e):n===3?new Q(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ae(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ae(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Fa.exec(t))?new Q(e[1],e[2],e[3],1):(e=Ua.exec(t))?new Q(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=La.exec(t))?ae(e[1],e[2],e[3],e[4]):(e=Ia.exec(t))?ae(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ha.exec(t))?Qn(e[1],e[2]/100,e[3]/100,1):(e=za.exec(t))?Qn(e[1],e[2]/100,e[3]/100,e[4]):Pn.hasOwnProperty(t)?Bn(Pn[t]):t==="transparent"?new Q(NaN,NaN,NaN,0):null}function Bn(t){return new Q(t>>16&255,t>>8&255,t&255,1)}function ae(t,e,n,r){return r<=0&&(t=e=n=NaN),new Q(t,e,n,r)}function Ra(t){return t instanceof ee||(t=Ct(t)),t?(t=t.rgb(),new Q(t.r,t.g,t.b,t.opacity)):new Q}function nn(t,e,n,r){return arguments.length===1?Ra(t):new Q(t,e,n,r==null?1:r)}function Q(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}wn(Q,nn,Or(ee,{brighter(t){return t=t==null?ve:Math.pow(ve,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gt:Math.pow(Gt,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Q(_t(this.r),_t(this.g),_t(this.b),we(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xn,formatHex:Xn,formatHex8:Wa,formatRgb:Zn,toString:Zn}));function Xn(){return`#${wt(this.r)}${wt(this.g)}${wt(this.b)}`}function Wa(){return`#${wt(this.r)}${wt(this.g)}${wt(this.b)}${wt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zn(){const t=we(this.opacity);return`${t===1?"rgb(":"rgba("}${_t(this.r)}, ${_t(this.g)}, ${_t(this.b)}${t===1?")":`, ${t})`}`}function we(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function _t(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wt(t){return t=_t(t),(t<16?"0":"")+t.toString(16)}function Qn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new et(t,e,n,r)}function Yr(t){if(t instanceof et)return new et(t.h,t.s,t.l,t.opacity);if(t instanceof ee||(t=Ct(t)),!t)return new et;if(t instanceof et)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,c=a-i,s=(a+i)/2;return c?(e===a?o=(n-r)/c+(n<r)*6:n===a?o=(r-e)/c+2:o=(e-n)/c+4,c/=s<.5?a+i:2-a-i,o*=60):c=s>0&&s<1?0:o,new et(o,c,s,t.opacity)}function Pa(t,e,n,r){return arguments.length===1?Yr(t):new et(t,e,n,r==null?1:r)}function et(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wn(et,Pa,Or(ee,{brighter(t){return t=t==null?ve:Math.pow(ve,t),new et(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gt:Math.pow(Gt,t),new et(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Q(Ye(t>=240?t-240:t+120,i,r),Ye(t,i,r),Ye(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new et(Gn(this.h),oe(this.s),oe(this.l),we(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=we(this.opacity);return`${t===1?"hsl(":"hsla("}${Gn(this.h)}, ${oe(this.s)*100}%, ${oe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Gn(t){return t=(t||0)%360,t<0?t+360:t}function oe(t){return Math.max(0,Math.min(1,t||0))}function Ye(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var xn=t=>()=>t;function Va(t,e){return function(n){return t+n*e}}function qa(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ba(t){return(t=+t)==1?Rr:function(e,n){return n-e?qa(e,n,t):xn(isNaN(e)?n:e)}}function Rr(t,e){var n=e-t;return n?Va(t,n):xn(isNaN(t)?e:t)}var xe=function t(e){var n=Ba(e);function r(i,a){var o=n((i=nn(i)).r,(a=nn(a)).r),c=n(i.g,a.g),s=n(i.b,a.b),u=Rr(i.opacity,a.opacity);return function(l){return i.r=o(l),i.g=c(l),i.b=s(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function Xa(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Za(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Qa(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=_n(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(c){for(o=0;o<r;++o)a[o]=i[o](c);return a}}function Ga(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function tt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ja(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=_n(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var rn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Re=new RegExp(rn.source,"g");function Ka(t){return function(){return t}}function ja(t){return function(e){return t(e)+""}}function Wr(t,e){var n=rn.lastIndex=Re.lastIndex=0,r,i,a,o=-1,c=[],s=[];for(t=t+"",e=e+"";(r=rn.exec(t))&&(i=Re.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),c[o]?c[o]+=a:c[++o]=a),(r=r[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,s.push({i:o,x:tt(r,i)})),n=Re.lastIndex;return n<e.length&&(a=e.slice(n),c[o]?c[o]+=a:c[++o]=a),c.length<2?s[0]?ja(s[0].x):Ka(e):(e=s.length,function(u){for(var l=0,f;l<e;++l)c[(f=s[l]).i]=f.x(u);return c.join("")})}function _n(t,e){var n=typeof e,r;return e==null||n==="boolean"?xn(e):(n==="number"?tt:n==="string"?(r=Ct(e))?(e=r,xe):Wr:e instanceof Ct?xe:e instanceof Date?Ga:Za(e)?Xa:Array.isArray(e)?Qa:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ja:tt)(t,e)}function to(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Jn=180/Math.PI,an={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pr(t,e,n,r,i,a){var o,c,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,s/=c),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Jn,skewX:Math.atan(s)*Jn,scaleX:o,scaleY:c}}var ce;function eo(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?an:Pr(e.a,e.b,e.c,e.d,e.e,e.f)}function no(t){return t==null||(ce||(ce=document.createElementNS("http://www.w3.org/2000/svg","g")),ce.setAttribute("transform",t),!(t=ce.transform.baseVal.consolidate()))?an:(t=t.matrix,Pr(t.a,t.b,t.c,t.d,t.e,t.f))}function Vr(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,l,f,h,g,w){if(u!==f||l!==h){var x=g.push("translate(",null,e,null,n);w.push({i:x-4,x:tt(u,f)},{i:x-2,x:tt(l,h)})}else(f||h)&&g.push("translate("+f+e+h+n)}function o(u,l,f,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:tt(u,l)})):l&&f.push(i(f)+"rotate("+l+r)}function c(u,l,f,h){u!==l?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:tt(u,l)}):l&&f.push(i(f)+"skewX("+l+r)}function s(u,l,f,h,g,w){if(u!==f||l!==h){var x=g.push(i(g)+"scale(",null,",",null,")");w.push({i:x-4,x:tt(u,f)},{i:x-2,x:tt(l,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(u,l){var f=[],h=[];return u=t(u),l=t(l),a(u.translateX,u.translateY,l.translateX,l.translateY,f,h),o(u.rotate,l.rotate,f,h),c(u.skewX,l.skewX,f,h),s(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,h),u=l=null,function(g){for(var w=-1,x=h.length,C;++w<x;)f[(C=h[w]).i]=C.x(g);return f.join("")}}}var ro=Vr(eo,"px, ","px)","deg)"),io=Vr(no,", ",")",")"),Lt=0,Bt=0,Yt=0,qr=1e3,_e,Xt,Me=0,bt=0,$e=0,Kt=typeof performance=="object"&&performance.now?performance:Date,Br=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Mn(){return bt||(Br(ao),bt=Kt.now()+$e)}function ao(){bt=0}function Ce(){this._call=this._time=this._next=null}Ce.prototype=Xr.prototype={constructor:Ce,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Mn():+n)+(e==null?0:+e),!this._next&&Xt!==this&&(Xt?Xt._next=this:_e=this,Xt=this),this._call=t,this._time=n,on()},stop:function(){this._call&&(this._call=null,this._time=1/0,on())}};function Xr(t,e,n){var r=new Ce;return r.restart(t,e,n),r}function oo(){Mn(),++Lt;for(var t=_e,e;t;)(e=bt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Lt}function Kn(){bt=(Me=Kt.now())+$e,Lt=Bt=0;try{oo()}finally{Lt=0,so(),bt=0}}function co(){var t=Kt.now(),e=t-Me;e>qr&&($e-=e,Me=t)}function so(){for(var t,e=_e,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:_e=n);Xt=t,on(r)}function on(t){if(!Lt){Bt&&(Bt=clearTimeout(Bt));var e=t-bt;e>24?(t<1/0&&(Bt=setTimeout(Kn,t-Kt.now()-$e)),Yt&&(Yt=clearInterval(Yt))):(Yt||(Me=Kt.now(),Yt=setInterval(co,qr)),Lt=1,Br(Kn))}}function jn(t,e,n){var r=new Ce;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var uo=gn("start","end","cancel","interrupt"),lo=[],Zr=0,tr=1,cn=2,de=3,er=4,sn=5,ge=6;function Fe(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;fo(t,n,{name:e,index:r,group:i,on:uo,tween:lo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Zr})}function Cn(t,e){var n=nt(t,e);if(n.state>Zr)throw new Error("too late; already scheduled");return n}function at(t,e){var n=nt(t,e);if(n.state>de)throw new Error("too late; already running");return n}function nt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function fo(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Xr(a,0,n.time);function a(u){n.state=tr,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var l,f,h,g;if(n.state!==tr)return s();for(l in r)if(g=r[l],g.name===n.name){if(g.state===de)return jn(o);g.state===er?(g.state=ge,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[l]):+l<e&&(g.state=ge,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[l])}if(jn(function(){n.state===de&&(n.state=er,n.timer.restart(c,n.delay,n.time),c(u))}),n.state=cn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===cn){for(n.state=de,i=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(g=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function c(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=sn,1),f=-1,h=i.length;++f<h;)i[f].call(t,l);n.state===sn&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=ge,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function ho(t,e){var n=t.__transition,r,i,a=!0,o;if(!!n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>cn&&r.state<sn,r.state=ge,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function po(t){return this.each(function(){ho(this,t)})}function go(t,e){var n,r;return function(){var i=at(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,c=r.length;o<c;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function mo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=at(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var c={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=c;break}s===u&&i.push(c)}a.tween=i}}function yo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=nt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?go:mo)(n,t,e))}function bn(t,e,n){var r=t._id;return t.each(function(){var i=at(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return nt(i,r).value[e]}}function Qr(t,e){var n;return(typeof e=="number"?tt:e instanceof Ct?xe:(n=Ct(e))?(e=n,xe):Wr)(t,e)}function vo(t){return function(){this.removeAttribute(t)}}function wo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xo(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function _o(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Mo(t,e,n){var r,i,a;return function(){var o,c=n(this),s;return c==null?void this.removeAttribute(t):(o=this.getAttribute(t),s=c+"",o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,c)))}}function Co(t,e,n){var r,i,a;return function(){var o,c=n(this),s;return c==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),s=c+"",o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,c)))}}function bo(t,e){var n=Ee(t),r=n==="transform"?io:Qr;return this.attrTween(t,typeof e=="function"?(n.local?Co:Mo)(n,r,bn(this,"attr."+t,e)):e==null?(n.local?wo:vo)(n):(n.local?_o:xo)(n,r,e))}function To(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function So(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Do(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&So(t,a)),n}return i._value=e,i}function Ao(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&To(t,a)),n}return i._value=e,i}function ko(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ee(t);return this.tween(n,(r.local?Do:Ao)(r,e))}function No(t,e){return function(){Cn(this,t).delay=+e.apply(this,arguments)}}function Eo(t,e){return e=+e,function(){Cn(this,t).delay=e}}function $o(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?No:Eo)(e,t)):nt(this.node(),e).delay}function Fo(t,e){return function(){at(this,t).duration=+e.apply(this,arguments)}}function Uo(t,e){return e=+e,function(){at(this,t).duration=e}}function Lo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fo:Uo)(e,t)):nt(this.node(),e).duration}function Io(t,e){if(typeof e!="function")throw new Error;return function(){at(this,t).ease=e}}function Ho(t){var e=this._id;return arguments.length?this.each(Io(e,t)):nt(this.node(),e).ease}function zo(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;at(this,t).ease=n}}function Oo(t){if(typeof t!="function")throw new Error;return this.each(zo(this._id,t))}function Yo(t){typeof t!="function"&&(t=Nr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,c=r[i]=[],s,u=0;u<o;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&c.push(s);return new pt(r,this._parents,this._name,this._id)}function Ro(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var s=e[c],u=n[c],l=s.length,f=o[c]=new Array(l),h,g=0;g<l;++g)(h=s[g]||u[g])&&(f[g]=h);for(;c<r;++c)o[c]=e[c];return new pt(o,this._parents,this._name,this._id)}function Wo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Po(t,e,n){var r,i,a=Wo(e)?Cn:at;return function(){var o=a(this,t),c=o.on;c!==r&&(i=(r=c).copy()).on(e,n),o.on=i}}function Vo(t,e){var n=this._id;return arguments.length<2?nt(this.node(),n).on.on(t):this.each(Po(n,t,e))}function qo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Bo(){return this.on("end.remove",qo(this._id))}function Xo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mn(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var c=r[o],s=c.length,u=a[o]=new Array(s),l,f,h=0;h<s;++h)(l=c[h])&&(f=t.call(l,l.__data__,h,c))&&("__data__"in l&&(f.__data__=l.__data__),u[h]=f,Fe(u[h],e,n,h,u,nt(l,n)));return new pt(a,this._parents,e,n)}function Zo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=kr(t));for(var r=this._groups,i=r.length,a=[],o=[],c=0;c<i;++c)for(var s=r[c],u=s.length,l,f=0;f<u;++f)if(l=s[f]){for(var h=t.call(l,l.__data__,f,s),g,w=nt(l,n),x=0,C=h.length;x<C;++x)(g=h[x])&&Fe(g,e,n,x,h,w);a.push(h),o.push(l)}return new pt(a,o,e,n)}var Qo=te.prototype.constructor;function Go(){return new Qo(this._groups,this._parents)}function Jo(t,e){var n,r,i;return function(){var a=Ut(this,t),o=(this.style.removeProperty(t),Ut(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Gr(t){return function(){this.style.removeProperty(t)}}function Ko(t,e,n){var r,i=n+"",a;return function(){var o=Ut(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function jo(t,e,n){var r,i,a;return function(){var o=Ut(this,t),c=n(this),s=c+"";return c==null&&(s=c=(this.style.removeProperty(t),Ut(this,t))),o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,c))}}function tc(t,e){var n,r,i,a="style."+e,o="end."+a,c;return function(){var s=at(this,t),u=s.on,l=s.value[a]==null?c||(c=Gr(e)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(o,i=l),s.on=r}}function ec(t,e,n){var r=(t+="")=="transform"?ro:Qr;return e==null?this.styleTween(t,Jo(t,r)).on("end.style."+t,Gr(t)):typeof e=="function"?this.styleTween(t,jo(t,r,bn(this,"style."+t,e))).each(tc(this._id,t)):this.styleTween(t,Ko(t,r,e),n).on("end.style."+t,null)}function nc(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function rc(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&nc(t,o,n)),r}return a._value=e,a}function ic(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,rc(t,e,n==null?"":n))}function ac(t){return function(){this.textContent=t}}function oc(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function cc(t){return this.tween("text",typeof t=="function"?oc(bn(this,"text",t)):ac(t==null?"":t+""))}function sc(t){return function(e){this.textContent=t.call(this,e)}}function uc(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&sc(i)),e}return r._value=t,r}function lc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,uc(t))}function fc(){for(var t=this._name,e=this._id,n=Jr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],c=o.length,s,u=0;u<c;++u)if(s=o[u]){var l=nt(s,e);Fe(s,t,n,u,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new pt(r,this._parents,t,n)}function hc(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var c={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var u=at(this,r),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(s)),u.on=e}),i===0&&a()})}var pc=0;function pt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Jr(){return++pc}var ut=te.prototype;pt.prototype={constructor:pt,select:Xo,selectAll:Zo,selectChild:ut.selectChild,selectChildren:ut.selectChildren,filter:Yo,merge:Ro,selection:Go,transition:fc,call:ut.call,nodes:ut.nodes,node:ut.node,size:ut.size,empty:ut.empty,each:ut.each,on:Vo,attr:bo,attrTween:ko,style:ec,styleTween:ic,text:cc,textTween:lc,remove:Bo,tween:yo,delay:$o,duration:Lo,ease:Ho,easeVarying:Oo,end:hc,[Symbol.iterator]:ut[Symbol.iterator]};function dc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var gc={time:null,delay:0,duration:250,ease:dc};function mc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function yc(t){var e,n;t instanceof pt?(e=t._id,t=t._name):(e=Jr(),(n=gc).time=Mn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],c=o.length,s,u=0;u<c;++u)(s=o[u])&&Fe(s,t,e,u,o,n||mc(s,e));return new pt(r,this._parents,t,e)}te.prototype.interrupt=po;te.prototype.transition=yc;const un=Math.PI,ln=2*un,yt=1e-6,vc=ln-yt;function fn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Kr(){return new fn}fn.prototype=Kr.prototype={constructor:fn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,c=n-t,s=r-e,u=a-t,l=o-e,f=u*u+l*l;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>yt)if(!(Math.abs(l*c-s*u)>yt)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-a,g=r-o,w=c*c+s*s,x=h*h+g*g,C=Math.sqrt(w),N=Math.sqrt(f),I=i*Math.tan((un-Math.acos((w+f-x)/(2*C*N)))/2),b=I/N,U=I/C;Math.abs(b-1)>yt&&(this._+="L"+(t+b*u)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>u*g)+","+(this._x1=t+U*c)+","+(this._y1=e+U*s)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),c=n*Math.sin(r),s=t+o,u=e+c,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>yt||Math.abs(this._y1-u)>yt)&&(this._+="L"+s+","+u),n&&(f<0&&(f=f%ln+ln),f>vc?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-c)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=u):f>yt&&(this._+="A"+n+","+n+",0,"+ +(f>=un)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var nr={},We={},Pe=34,Rt=10,Ve=13;function jr(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function wc(t,e){var n=jr(t);return function(r,i){return e(n(r),i,t)}}function rr(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Z(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function xc(t){return t<0?"-"+Z(-t,6):t>9999?"+"+Z(t,6):Z(t,4)}function _c(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":xc(t.getUTCFullYear())+"-"+Z(t.getUTCMonth()+1,2)+"-"+Z(t.getUTCDate(),2)+(i?"T"+Z(e,2)+":"+Z(n,2)+":"+Z(r,2)+"."+Z(i,3)+"Z":r?"T"+Z(e,2)+":"+Z(n,2)+":"+Z(r,2)+"Z":n||e?"T"+Z(e,2)+":"+Z(n,2)+"Z":"")}function Mc(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var g,w,x=i(f,function(C,N){if(g)return g(C,N-1);w=C,g=h?wc(C,h):jr(C)});return x.columns=w||[],x}function i(f,h){var g=[],w=f.length,x=0,C=0,N,I=w<=0,b=!1;f.charCodeAt(w-1)===Rt&&--w,f.charCodeAt(w-1)===Ve&&--w;function U(){if(I)return We;if(b)return b=!1,nr;var d,T=x,Y;if(f.charCodeAt(T)===Pe){for(;x++<w&&f.charCodeAt(x)!==Pe||f.charCodeAt(++x)===Pe;);return(d=x)>=w?I=!0:(Y=f.charCodeAt(x++))===Rt?b=!0:Y===Ve&&(b=!0,f.charCodeAt(x)===Rt&&++x),f.slice(T+1,d-1).replace(/""/g,'"')}for(;x<w;){if((Y=f.charCodeAt(d=x++))===Rt)b=!0;else if(Y===Ve)b=!0,f.charCodeAt(x)===Rt&&++x;else if(Y!==n)continue;return f.slice(T,d)}return I=!0,f.slice(T,w)}for(;(N=U())!==We;){for(var F=[];N!==nr&&N!==We;)F.push(N),N=U();h&&(F=h(F,C++))==null||g.push(F)}return g}function a(f,h){return f.map(function(g){return h.map(function(w){return l(g[w])}).join(t)})}function o(f,h){return h==null&&(h=rr(f)),[h.map(l).join(t)].concat(a(f,h)).join(`
`)}function c(f,h){return h==null&&(h=rr(f)),a(f,h).join(`
`)}function s(f){return f.map(u).join(`
`)}function u(f){return f.map(l).join(t)}function l(f){return f==null?"":f instanceof Date?_c(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:c,formatRows:s,formatRow:u,formatValue:l}}var Cc=Mc(","),bc=Cc.parse;function se(t){for(var e in t){var n=t[e].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Tc&&!!i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const Tc=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Sc(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Dc(t,e){return fetch(t,e).then(Sc)}function Ac(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Dc(e,n).then(function(i){return t(i,r)})}}var ue=Ac(bc);function kc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function be(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function It(t){return t=be(Math.abs(t)),t?t[1]:NaN}function Nc(t,e){return function(n,r){for(var i=n.length,a=[],o=0,c=t[0],s=0;i>0&&c>0&&(s+c+1>r&&(c=Math.max(1,r-s)),a.push(n.substring(i-=c,i+c)),!((s+=c+1)>r));)c=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Ec(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var $c=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Te(t){if(!(e=$c.exec(t)))throw new Error("invalid format: "+t);var e;return new Tn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Te.prototype=Tn.prototype;function Tn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Tn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fc(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ti;function Uc(t,e){var n=be(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(ti=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+be(t,Math.max(0,e+a-1))[0]}function ir(t,e){var n=be(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var ar={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:kc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ir(t*100,e),r:ir,s:Uc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function or(t){return t}var cr=Array.prototype.map,sr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Lc(t){var e=t.grouping===void 0||t.thousands===void 0?or:Nc(cr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?or:Ec(cr.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"\u2212":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Te(f);var h=f.fill,g=f.align,w=f.sign,x=f.symbol,C=f.zero,N=f.width,I=f.comma,b=f.precision,U=f.trim,F=f.type;F==="n"?(I=!0,F="g"):ar[F]||(b===void 0&&(b=12),U=!0,F="g"),(C||h==="0"&&g==="=")&&(C=!0,h="0",g="=");var d=x==="$"?n:x==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",T=x==="$"?r:/[%p]/.test(F)?o:"",Y=ar[F],z=/[defgprs%]/.test(F);b=b===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function B(M){var D=d,v=T,S,A,E;if(F==="c")v=Y(M)+v,M="";else{M=+M;var O=M<0||1/M<0;if(M=isNaN(M)?s:Y(Math.abs(M),b),U&&(M=Fc(M)),O&&+M==0&&w!=="+"&&(O=!1),D=(O?w==="("?w:c:w==="-"||w==="("?"":w)+D,v=(F==="s"?sr[8+ti/3]:"")+v+(O&&w==="("?")":""),z){for(S=-1,A=M.length;++S<A;)if(E=M.charCodeAt(S),48>E||E>57){v=(E===46?i+M.slice(S+1):M.slice(S))+v,M=M.slice(0,S);break}}}I&&!C&&(M=e(M,1/0));var W=D.length+M.length+v.length,R=W<N?new Array(N-W+1).join(h):"";switch(I&&C&&(M=e(R+M,R.length?N-v.length:1/0),R=""),g){case"<":M=D+M+v+R;break;case"=":M=D+R+M+v;break;case"^":M=R.slice(0,W=R.length>>1)+D+M+v+R.slice(W);break;default:M=R+D+M+v;break}return a(M)}return B.toString=function(){return f+""},B}function l(f,h){var g=u((f=Te(f),f.type="f",f)),w=Math.max(-8,Math.min(8,Math.floor(It(h)/3)))*3,x=Math.pow(10,-w),C=sr[8+w/3];return function(N){return g(x*N)+C}}return{format:u,formatPrefix:l}}var le,Sn,ei;Ic({thousands:",",grouping:[3],currency:["$",""]});function Ic(t){return le=Lc(t),Sn=le.format,ei=le.formatPrefix,le}function Hc(t){return Math.max(0,-It(Math.abs(t)))}function zc(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(It(e)/3)))*3-It(Math.abs(t)))}function Oc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,It(e)-It(t))+1}function ne(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const ur=Symbol("implicit");function ni(){var t=new zn,e=[],n=[],r=ur;function i(a){let o=t.get(a);if(o===void 0){if(r!==ur)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new zn;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ni(e,n).unknown(r)},ne.apply(i,arguments),i}function Dn(){var t=ni().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,c=!1,s=0,u=0,l=.5;delete t.unknown;function f(){var h=e().length,g=i<r,w=g?i:r,x=g?r:i;a=(x-w)/Math.max(1,h-s+u*2),c&&(a=Math.floor(a)),w+=(x-w-a*(h-s))*l,o=a*(1-s),c&&(w=Math.round(w),o=Math.round(o));var C=Sr(h).map(function(N){return w+a*N});return n(g?C.reverse():C)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,c=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(c=!!h,f()):c},t.padding=function(h){return arguments.length?(s=Math.min(1,u=+h),f()):s},t.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),f()):l},t.copy=function(){return Dn(e(),[r,i]).round(c).paddingInner(s).paddingOuter(u).align(l)},ne.apply(f(),arguments)}function Yc(t){return function(){return t}}function Rc(t){return+t}var lr=[0,1];function rt(t){return t}function hn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yc(isNaN(e)?NaN:.5)}function Wc(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Pc(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=hn(i,r),a=n(o,a)):(r=hn(r,i),a=n(a,o)),function(c){return a(r(c))}}function Vc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=hn(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(c){var s=qi(t,c,1,r)-1;return a[s](i[s](c))}}function An(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ri(){var t=lr,e=lr,n=_n,r,i,a,o=rt,c,s,u;function l(){var h=Math.min(t.length,e.length);return o!==rt&&(o=Wc(t[0],t[h-1])),c=h>2?Vc:Pc,s=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(s||(s=c(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=c(e,t.map(r),tt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Rc),l()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),l()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=to,l()},f.clamp=function(h){return arguments.length?(o=h?!0:rt,l()):o!==rt},f.interpolate=function(h){return arguments.length?(n=h,l()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return r=h,i=g,l()}}function ii(){return ri()(rt,rt)}function qc(t,e,n,r){var i=tn(t,e,n),a;switch(r=Te(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=zc(i,o))&&(r.precision=a),ei(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Oc(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Hc(i))&&(r.precision=a-(r.type==="%")*2);break}}return Sn(r)}function ai(t){var e=t.domain;return t.ticks=function(n){var r=e();return Gi(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return qc(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],c=r[a],s,u,l=10;for(c<o&&(u=o,o=c,c=u,u=i,i=a,a=u);l-- >0;){if(u=br(o,c,n),u===s)return r[i]=o,r[a]=c,e(r);if(u>0)o=Math.floor(o/u)*u,c=Math.ceil(c/u)*u;else if(u<0)o=Math.ceil(o*u)/u,c=Math.floor(c*u)/u;else break;s=u}return t},t}function oi(){var t=ii();return t.copy=function(){return An(t,oi())},ne.apply(t,arguments),ai(t)}function Bc(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function fr(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Xc(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Zc(t){return t<0?-t*t:t*t}function Qc(t){var e=t(rt,rt),n=1;function r(){return n===1?t(rt,rt):n===.5?t(Xc,Zc):t(fr(n),fr(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ai(e)}function ci(){var t=Qc(ri());return t.copy=function(){return An(t,ci()).exponent(t.exponent())},ne.apply(t,arguments),t}function Gc(){return ci.apply(null,arguments).exponent(.5)}var qe=new Date,Be=new Date;function P(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return t(a=new Date(+a)),a},i.ceil=function(a){return t(a=new Date(a-1)),e(a,1),t(a),a},i.round=function(a){var o=i(a),c=i.ceil(a);return a-o<c-a?o:c},i.offset=function(a,o){return e(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,c){var s=[],u;if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<o)||!(c>0))return s;do s.push(u=new Date(+a)),e(a,c),t(a);while(u<a&&a<o);return s},i.filter=function(a){return P(function(o){if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},function(o,c){if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!a(o););else for(;--c>=0;)for(;e(o,1),!a(o););})},n&&(i.count=function(a,o){return qe.setTime(+a),Be.setTime(+o),t(qe),t(Be),Math.floor(n(qe,Be))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?function(o){return r(o)%a===0}:function(o){return i.count(0,o)%a===0}):i}),i}var Se=P(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Se.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?P(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Se};var Jc=Se;Se.range;const ft=1e3,K=ft*60,ht=K*60,Tt=ht*24,kn=Tt*7,hr=Tt*30,Xe=Tt*365;var si=P(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*ft)},function(t,e){return(e-t)/ft},function(t){return t.getUTCSeconds()}),Zt=si;si.range;var ui=P(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ft)},function(t,e){t.setTime(+t+e*K)},function(t,e){return(e-t)/K},function(t){return t.getMinutes()}),li=ui;ui.range;var fi=P(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ft-t.getMinutes()*K)},function(t,e){t.setTime(+t+e*ht)},function(t,e){return(e-t)/ht},function(t){return t.getHours()}),hi=fi;fi.range;var pi=P(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*K)/Tt,t=>t.getDate()-1),Ue=pi;pi.range;function Dt(t){return P(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*K)/kn})}var re=Dt(0),De=Dt(1),Kc=Dt(2),jc=Dt(3),Ht=Dt(4),ts=Dt(5),es=Dt(6);re.range;De.range;Kc.range;jc.range;Ht.range;ts.range;es.range;var di=P(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),Ae=di;di.range;var Nn=P(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Nn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:P(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};var St=Nn;Nn.range;var gi=P(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*K)},function(t,e){return(e-t)/K},function(t){return t.getUTCMinutes()}),ns=gi;gi.range;var mi=P(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*ht)},function(t,e){return(e-t)/ht},function(t){return t.getUTCHours()}),rs=mi;mi.range;var yi=P(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Tt},function(t){return t.getUTCDate()-1}),En=yi;yi.range;function At(t){return P(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/kn})}var $n=At(0),ke=At(1),is=At(2),as=At(3),zt=At(4),os=At(5),cs=At(6);$n.range;ke.range;is.range;as.range;zt.range;os.range;cs.range;var vi=P(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),ss=vi;vi.range;var Fn=P(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Fn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:P(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};var Ot=Fn;Fn.range;function wi(t,e,n,r,i,a){const o=[[Zt,1,ft],[Zt,5,5*ft],[Zt,15,15*ft],[Zt,30,30*ft],[a,1,K],[a,5,5*K],[a,15,15*K],[a,30,30*K],[i,1,ht],[i,3,3*ht],[i,6,6*ht],[i,12,12*ht],[r,1,Tt],[r,2,2*Tt],[n,1,kn],[e,1,hr],[e,3,3*hr],[t,1,Xe]];function c(u,l,f){const h=l<u;h&&([u,l]=[l,u]);const g=f&&typeof f.range=="function"?f:s(u,l,f),w=g?g.range(u,+l+1):[];return h?w.reverse():w}function s(u,l,f){const h=Math.abs(l-u)/f,g=Ne(([,,C])=>C).right(o,h);if(g===o.length)return t.every(tn(u/Xe,l/Xe,f));if(g===0)return Jc.every(Math.max(tn(u,l,f),1));const[w,x]=o[h/o[g-1][2]<o[g][2]/h?g-1:g];return w.every(x)}return[c,s]}wi(Ot,ss,$n,En,rs,ns);const[us,ls]=wi(St,Ae,re,Ue,hi,li);function Ze(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qe(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wt(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function fs(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,c=t.months,s=t.shortMonths,u=Pt(i),l=Vt(i),f=Pt(a),h=Vt(a),g=Pt(o),w=Vt(o),x=Pt(c),C=Vt(c),N=Pt(s),I=Vt(s),b={a:O,A:W,b:R,B:ot,c:null,d:vr,e:vr,f:Us,g:Vs,G:Bs,H:Es,I:$s,j:Fs,L:xi,m:Ls,M:Is,p:j,q:ct,Q:_r,s:Mr,S:Hs,u:zs,U:Os,V:Ys,w:Rs,W:Ws,x:null,X:null,y:Ps,Y:qs,Z:Xs,"%":xr},U={a:st,A:Le,b:Ie,B:ie,c:null,d:wr,e:wr,f:Js,g:cu,G:uu,H:Zs,I:Qs,j:Gs,L:Mi,m:Ks,M:js,p,q:k,Q:_r,s:Mr,S:tu,u:eu,U:nu,V:ru,w:iu,W:au,x:null,X:null,y:ou,Y:su,Z:lu,"%":xr},F={a:B,A:M,b:D,B:v,c:S,d:mr,e:mr,f:Ds,g:gr,G:dr,H:yr,I:yr,j:Cs,L:Ss,m:Ms,M:bs,p:z,q:_s,Q:ks,s:Ns,S:Ts,u:ms,U:ys,V:vs,w:gs,W:ws,x:A,X:E,y:gr,Y:dr,Z:xs,"%":As};b.x=d(n,b),b.X=d(r,b),b.c=d(e,b),U.x=d(n,U),U.X=d(r,U),U.c=d(e,U);function d(y,_){return function($){var m=[],X=-1,H=0,G=y.length,J,mt,Un;for($ instanceof Date||($=new Date(+$));++X<G;)y.charCodeAt(X)===37&&(m.push(y.slice(H,X)),(mt=pr[J=y.charAt(++X)])!=null?J=y.charAt(++X):mt=J==="e"?" ":"0",(Un=_[J])&&(J=Un($,mt)),m.push(J),H=X+1);return m.push(y.slice(H,X)),m.join("")}}function T(y,_){return function($){var m=Wt(1900,void 0,1),X=Y(m,y,$+="",0),H,G;if(X!=$.length)return null;if("Q"in m)return new Date(m.Q);if("s"in m)return new Date(m.s*1e3+("L"in m?m.L:0));if(_&&!("Z"in m)&&(m.Z=0),"p"in m&&(m.H=m.H%12+m.p*12),m.m===void 0&&(m.m="q"in m?m.q:0),"V"in m){if(m.V<1||m.V>53)return null;"w"in m||(m.w=1),"Z"in m?(H=Qe(Wt(m.y,0,1)),G=H.getUTCDay(),H=G>4||G===0?ke.ceil(H):ke(H),H=En.offset(H,(m.V-1)*7),m.y=H.getUTCFullYear(),m.m=H.getUTCMonth(),m.d=H.getUTCDate()+(m.w+6)%7):(H=Ze(Wt(m.y,0,1)),G=H.getDay(),H=G>4||G===0?De.ceil(H):De(H),H=Ue.offset(H,(m.V-1)*7),m.y=H.getFullYear(),m.m=H.getMonth(),m.d=H.getDate()+(m.w+6)%7)}else("W"in m||"U"in m)&&("w"in m||(m.w="u"in m?m.u%7:"W"in m?1:0),G="Z"in m?Qe(Wt(m.y,0,1)).getUTCDay():Ze(Wt(m.y,0,1)).getDay(),m.m=0,m.d="W"in m?(m.w+6)%7+m.W*7-(G+5)%7:m.w+m.U*7-(G+6)%7);return"Z"in m?(m.H+=m.Z/100|0,m.M+=m.Z%100,Qe(m)):Ze(m)}}function Y(y,_,$,m){for(var X=0,H=_.length,G=$.length,J,mt;X<H;){if(m>=G)return-1;if(J=_.charCodeAt(X++),J===37){if(J=_.charAt(X++),mt=F[J in pr?_.charAt(X++):J],!mt||(m=mt(y,$,m))<0)return-1}else if(J!=$.charCodeAt(m++))return-1}return m}function z(y,_,$){var m=u.exec(_.slice($));return m?(y.p=l.get(m[0].toLowerCase()),$+m[0].length):-1}function B(y,_,$){var m=g.exec(_.slice($));return m?(y.w=w.get(m[0].toLowerCase()),$+m[0].length):-1}function M(y,_,$){var m=f.exec(_.slice($));return m?(y.w=h.get(m[0].toLowerCase()),$+m[0].length):-1}function D(y,_,$){var m=N.exec(_.slice($));return m?(y.m=I.get(m[0].toLowerCase()),$+m[0].length):-1}function v(y,_,$){var m=x.exec(_.slice($));return m?(y.m=C.get(m[0].toLowerCase()),$+m[0].length):-1}function S(y,_,$){return Y(y,e,_,$)}function A(y,_,$){return Y(y,n,_,$)}function E(y,_,$){return Y(y,r,_,$)}function O(y){return o[y.getDay()]}function W(y){return a[y.getDay()]}function R(y){return s[y.getMonth()]}function ot(y){return c[y.getMonth()]}function j(y){return i[+(y.getHours()>=12)]}function ct(y){return 1+~~(y.getMonth()/3)}function st(y){return o[y.getUTCDay()]}function Le(y){return a[y.getUTCDay()]}function Ie(y){return s[y.getUTCMonth()]}function ie(y){return c[y.getUTCMonth()]}function p(y){return i[+(y.getUTCHours()>=12)]}function k(y){return 1+~~(y.getUTCMonth()/3)}return{format:function(y){var _=d(y+="",b);return _.toString=function(){return y},_},parse:function(y){var _=T(y+="",!1);return _.toString=function(){return y},_},utcFormat:function(y){var _=d(y+="",U);return _.toString=function(){return y},_},utcParse:function(y){var _=T(y+="",!0);return _.toString=function(){return y},_}}}var pr={"-":"",_:" ",0:"0"},V=/^\s*\d+/,hs=/^%/,ps=/[\\^$*+?|[\]().{}]/g;function L(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function ds(t){return t.replace(ps,"\\$&")}function Pt(t){return new RegExp("^(?:"+t.map(ds).join("|")+")","i")}function Vt(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function gs(t,e,n){var r=V.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ms(t,e,n){var r=V.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ys(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function vs(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ws(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function dr(t,e,n){var r=V.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function gr(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function xs(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _s(t,e,n){var r=V.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ms(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function mr(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Cs(t,e,n){var r=V.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function yr(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function bs(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ts(t,e,n){var r=V.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ss(t,e,n){var r=V.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ds(t,e,n){var r=V.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function As(t,e,n){var r=hs.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ks(t,e,n){var r=V.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ns(t,e,n){var r=V.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function vr(t,e){return L(t.getDate(),e,2)}function Es(t,e){return L(t.getHours(),e,2)}function $s(t,e){return L(t.getHours()%12||12,e,2)}function Fs(t,e){return L(1+Ue.count(St(t),t),e,3)}function xi(t,e){return L(t.getMilliseconds(),e,3)}function Us(t,e){return xi(t,e)+"000"}function Ls(t,e){return L(t.getMonth()+1,e,2)}function Is(t,e){return L(t.getMinutes(),e,2)}function Hs(t,e){return L(t.getSeconds(),e,2)}function zs(t){var e=t.getDay();return e===0?7:e}function Os(t,e){return L(re.count(St(t)-1,t),e,2)}function _i(t){var e=t.getDay();return e>=4||e===0?Ht(t):Ht.ceil(t)}function Ys(t,e){return t=_i(t),L(Ht.count(St(t),t)+(St(t).getDay()===4),e,2)}function Rs(t){return t.getDay()}function Ws(t,e){return L(De.count(St(t)-1,t),e,2)}function Ps(t,e){return L(t.getFullYear()%100,e,2)}function Vs(t,e){return t=_i(t),L(t.getFullYear()%100,e,2)}function qs(t,e){return L(t.getFullYear()%1e4,e,4)}function Bs(t,e){var n=t.getDay();return t=n>=4||n===0?Ht(t):Ht.ceil(t),L(t.getFullYear()%1e4,e,4)}function Xs(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+L(e/60|0,"0",2)+L(e%60,"0",2)}function wr(t,e){return L(t.getUTCDate(),e,2)}function Zs(t,e){return L(t.getUTCHours(),e,2)}function Qs(t,e){return L(t.getUTCHours()%12||12,e,2)}function Gs(t,e){return L(1+En.count(Ot(t),t),e,3)}function Mi(t,e){return L(t.getUTCMilliseconds(),e,3)}function Js(t,e){return Mi(t,e)+"000"}function Ks(t,e){return L(t.getUTCMonth()+1,e,2)}function js(t,e){return L(t.getUTCMinutes(),e,2)}function tu(t,e){return L(t.getUTCSeconds(),e,2)}function eu(t){var e=t.getUTCDay();return e===0?7:e}function nu(t,e){return L($n.count(Ot(t)-1,t),e,2)}function Ci(t){var e=t.getUTCDay();return e>=4||e===0?zt(t):zt.ceil(t)}function ru(t,e){return t=Ci(t),L(zt.count(Ot(t),t)+(Ot(t).getUTCDay()===4),e,2)}function iu(t){return t.getUTCDay()}function au(t,e){return L(ke.count(Ot(t)-1,t),e,2)}function ou(t,e){return L(t.getUTCFullYear()%100,e,2)}function cu(t,e){return t=Ci(t),L(t.getUTCFullYear()%100,e,2)}function su(t,e){return L(t.getUTCFullYear()%1e4,e,4)}function uu(t,e){var n=t.getUTCDay();return t=n>=4||n===0?zt(t):zt.ceil(t),L(t.getUTCFullYear()%1e4,e,4)}function lu(){return"+0000"}function xr(){return"%"}function _r(t){return+t}function Mr(t){return Math.floor(+t/1e3)}var fe,gt,jt;fu({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fu(t){return fe=fs(t),gt=fe.format,jt=fe.parse,fe}function hu(t){return new Date(t)}function pu(t){return t instanceof Date?+t:+new Date(+t)}function bi(t,e,n,r,i,a,o,c,s,u){var l=ii(),f=l.invert,h=l.domain,g=u(".%L"),w=u(":%S"),x=u("%I:%M"),C=u("%I %p"),N=u("%a %d"),I=u("%b %d"),b=u("%B"),U=u("%Y");function F(d){return(s(d)<d?g:c(d)<d?w:o(d)<d?x:a(d)<d?C:r(d)<d?i(d)<d?N:I:n(d)<d?b:U)(d)}return l.invert=function(d){return new Date(f(d))},l.domain=function(d){return arguments.length?h(Array.from(d,pu)):h().map(hu)},l.ticks=function(d){var T=h();return t(T[0],T[T.length-1],d==null?10:d)},l.tickFormat=function(d,T){return T==null?F:u(T)},l.nice=function(d){var T=h();return(!d||typeof d.range!="function")&&(d=e(T[0],T[T.length-1],d==null?10:d)),d?h(Bc(T,d)):l},l.copy=function(){return An(l,bi(t,e,n,r,i,a,o,c,s,u))},l}function du(){return ne.apply(bi(us,ls,St,Ae,re,Ue,hi,li,Zt,gt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kt(t){return function(){return t}}function gu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ti(t){this._context=t}Ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function mu(t){return new Ti(t)}function yu(t){return t[0]}function vu(t){return t[1]}function wu(t,e){var n=kt(!0),r=null,i=mu,a=null;t=typeof t=="function"?t:t===void 0?yu:kt(t),e=typeof e=="function"?e:e===void 0?vu:kt(e);function o(c){var s,u=(c=gu(c)).length,l,f=!1,h;for(r==null&&(a=i(h=Kr())),s=0;s<=u;++s)!(s<u&&n(l=c[s],s,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(l,s,c),+e(l,s,c));if(h)return a=null,h+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:kt(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:kt(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:kt(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function Qt(t,e,n){this.k=t,this.x=e,this.y=n}Qt.prototype={constructor:Qt,scale:function(t){return t===1?this:new Qt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Qt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Qt(1,0,0);function xu(t,e,n,r){for(var i=[],a=t.split(/\s+/).reverse(),o,c=[],s,u;o=a.pop();){c.push(o),u=c.join(" ");var l=Ft(u,n,r);l>e&&(s.length==1?i.push(s[0]):i.push(s),c=[o],u=[o]),s=u}return u.length==1?i.push(u[0]):i.push(u),i}function Ft(t,e,n){var r=document.createElement("canvas"),i=r.getContext("2d");return i.font=e+"px "+n,i.measureText(t).width}function Si(t){if(t.Variant=="native")return vt.blue;if(t.Variant=="alpha")return vt.pink;if(t.Variant=="delta")return vt.aqua;if(t.Variant=="Omicron BA.1")return vt.orange;if(t.Variant=="Omicron BA.2")return vt.yellow}gt("%B %y");gt("%Y");function _u(t,e=document){return typeof t=="string"?Array.from(e.querySelectorAll(t)):t instanceof Element?[t]:t instanceof NodeList?Array.from(t):t instanceof Array?t:[]}function Mu(t){const e=document.createElement("div");e.className=`scrollama__debug-step ${t}`,e.style.position="fixed",e.style.left="0",e.style.width="100%",e.style.zIndex="9999",e.style.borderTop="2px solid black",e.style.borderBottom="2px solid black";const n=document.createElement("p");return n.style.position="absolute",n.style.left="0",n.style.height="1px",n.style.width="100%",n.style.borderTop="1px dashed black",e.appendChild(n),document.body.appendChild(e),e}function Cu({id:t,step:e,marginTop:n}){const{index:r,height:i}=e,a=`scrollama__debug-step--${t}-${r}`;let o=document.querySelector(`.${a}`);o||(o=Mu(a)),o.style.top=`${n*-1}px`,o.style.height=`${i}px`,o.querySelector("p").style.top=`${i/2}px`}function bu(){const t="abcdefghijklmnopqrstuvwxyz",e=Date.now(),n=[];for(let r=0;r<6;r+=1){const i=t[Math.floor(Math.random()*t.length)];n.push(i)}return`${n.join("")}${e}`}function he(t){console.error(`scrollama error: ${t}`)}function qt(t){return+t.getAttribute("data-scrollama-index")}function Tu(t,e){const n=Math.ceil(t/e),r=[],i=1/n;for(let a=0;a<n+1;a+=1)r.push(a*i);return r}function Ge(t){if(typeof t=="string"&&t.indexOf("px")>0){const e=+t.replace("px","");return isNaN(e)?(err("offset value must be in 'px' format. Fallback to 0.5."),{format:"percent",value:.5}):{format:"pixels",value:e}}else if(typeof t=="number"||!isNaN(+t))return t>1&&err("offset value is greater than 1. Fallback to 1."),t<0&&err("offset value is lower than 0. Fallback to 0."),{format:"percent",value:Math.min(Math.max(0,t),1)};return null}function Su(t){t.forEach(e=>e.node.setAttribute("data-scrollama-index",e.index))}function Du(t){const{top:e}=t.getBoundingClientRect(),n=window.pageYOffset,r=document.body.clientTop||0;return e+n-r}let Nt,me,lt;function Di(t){const e=t?t.scrollTop:window.pageYOffset;Nt!==e&&(Nt=e,Nt>me?lt="down":Nt<me&&(lt="up"),me=Nt)}function Au(t){Nt=0,me=0,document.addEventListener("scroll",()=>Di(t))}function ku(){let t={},e=bu(),n=[],r,i,a=0,o=!1,c=!1,s=!1,u=!1,l=[];function f(){t={stepEnter:()=>{},stepExit:()=>{},stepProgress:()=>{}},l=[]}function h(v){v&&!o&&M(),!v&&o&&U(),o=v}function g(v,S){const A=qt(v),E=n[A];S!==void 0&&(E.progress=S);const O={element:v,index:A,progress:S,direction:lt};E.state==="enter"&&t.stepProgress(O)}function w(v,S){const A=qt(v),E=n[A],O={element:v,index:A,direction:lt};E.direction=lt,E.state="enter",l[A]||t.stepEnter(O),u&&(l[A]=!0)}function x(v,S){const A=qt(v),E=n[A];if(!E.state)return!1;const O={element:v,index:A,direction:lt};c&&(lt==="down"&&E.progress<1?g(v,1):lt==="up"&&E.progress>0&&g(v,0)),E.direction=lt,E.state="exit",t.stepExit(O)}function C([v]){const S=qt(v.target),A=n[S],E=v.target.offsetHeight;E!==A.height&&(A.height=E,b(A),T(A),F(A))}function N([v]){Di(i);const{isIntersecting:S,target:A}=v;S?w(A):x(A)}function I([v]){const S=qt(v.target),A=n[S],{isIntersecting:E,intersectionRatio:O,target:W}=v;E&&A.state==="enter"&&g(W,O)}function b({observers:v}){Object.keys(v).map(S=>{v[S].disconnect()})}function U(){n.forEach(b)}function F(v){const S=new ResizeObserver(C);S.observe(v.node),v.observers.resize=S}function d(){n.forEach(F)}function T(v){const S=window.innerHeight,A=v.offset||r,E=A.format==="pixels"?1:S,O=A.value*E,W=v.height/2-O,R=v.height/2-(S-O),ct={rootMargin:`${W}px 0px ${R}px 0px`,threshold:.5},st=new IntersectionObserver(N,ct);st.observe(v.node),v.observers.step=st,s&&Cu({id:e,step:v,marginTop:W,marginBottom:R})}function Y(){n.forEach(T)}function z(v){const S=window.innerHeight,A=v.offset||r,E=A.format==="pixels"?1:S,O=A.value*E,W=-O+v.height,R=O-S,ot=`${W}px 0px ${R}px 0px`,j=Tu(v.height,a),ct={rootMargin:ot,threshold:j},st=new IntersectionObserver(I,ct);st.observe(v.node),v.observers.progress=st}function B(){n.forEach(z)}function M(){U(),d(),Y(),c&&B()}const D={};return D.setup=({step:v,parent:S,offset:A=.5,threshold:E=4,progress:O=!1,once:W=!1,debug:R=!1,container:ot=void 0})=>(Au(ot),n=_u(v,S).map((j,ct)=>({index:ct,direction:void 0,height:j.offsetHeight,node:j,observers:{},offset:Ge(j.dataset.offset),top:Du(j),progress:0,state:void 0})),n.length?(c=O,u=W,s=R,a=Math.max(1,+E),r=Ge(A),i=ot,f(),Su(n),h(!0),D):(he("no step elements"),D)),D.enable=()=>(h(!0),D),D.disable=()=>(h(!1),D),D.destroy=()=>(h(!1),f(),D),D.resize=()=>(M(),D),D.offset=v=>v==null?r.value:(r=Ge(v),M(),D),D.onStepEnter=v=>(typeof v=="function"?t.stepEnter=v:he("onStepEnter requires a function"),D),D.onStepExit=v=>(typeof v=="function"?t.stepExit=v:he("onStepExit requires a function"),D),D.onStepProgress=v=>(typeof v=="function"?t.stepProgress=v:he("onStepProgress requires a function"),D),D}const pn=200,Nu=.6,dn=570;function dt(t,{metricData:e,metric:n="hospAdData",programmes:r,linkedEvents:i,variants:a,scrollOffset:o=.5}){if(!t||!(t instanceof Element))throw new Error("Timeline: container element is not a valid DOM element.");if(Oi.indexOf(n)===-1)throw new Error(`Timeline: invalid metric ${n}`);this.elContainer=t,this.metricData=e,this.metric=n,this.programmes=r,this.linkedEvents=i,this.variants=a,this.scrollOffset=o,this.dispatch=gn("highlightDate");try{this.init(),this.render(),this.renderLegend()}catch(c){console.error("Timeline error: ",c)}}dt.prototype.init=function(){const t=new Date(2020,2,1),e=new Date(2022,4,5),n=new Date(2022,4,5),i=Ae.every(1).count(t,e)*pn,a=Math.max(window.innerWidth,dn);this.timelineHeight=i,this.timelineWidth=a,this.isSmallScreen=a<=dn;const o=du().domain([t,e]).range([150,i]),c=Dn().domain(Et).paddingOuter(.2).range([100,a]),s=Gc().domain([0,63.4]).range([0,Math.max(18,c.bandwidth()/8)]),u=Ae.every(1).range(t,e),l=re.every(1).range(t,n).filter(d=>d.getTime()<=e.getTime());this.data={aMonths:u,aWeeks:l},this.yScale=o,this.xScale=c,this.circleArea=s,this.jitterScale=oi().domain([0,1]),this.metricXScale=this.getMetricScale();const f=this.metricData[this.metric];if(!f)throw Error("No metric data for",this.metric);const h=jt("%m/%d/%y"),g=gt("%-e %b %Y"),w=[];f.forEach(d=>{const T=h(d.date),Y=g(T),z=Ft(Y,12,"'InterFace-Bold'")+20;Et.forEach((B,M)=>{d[`Event ${B}`]&&w.push(Oe(ze({},d),{date:Y,dt:T,country:B,eventDate:Y,eventText:d[`Event ${B}`],EventType:1,eventDateWidth:z,"Event vaccine programme":null,"Direction vaccine programme":null,"Icon vaccine programme":null}));const D="Event vaccine programme";d[D]&&w.push({date:Y,dt:T,country:B,eventText:M?null:d[D],EventType:2,eventDateWidth:z,"Event vaccine programme":d[D],"Direction vaccine programme":d["Direction vaccine programme"],"Icon vaccine programme":d["Icon vaccine programme"]})})}),w.sort((d,T)=>d.dt-T.dt),this.aEventsData=w;const x=Mt(this.elContainer).select("svg.timeline");this.svg=x,x.style("width","100%").style("height","100%").attr("viewBox",`0 0 ${this.timelineWidth} ${this.timelineHeight}`);const C=x.append("g").classed("g-main",!0);C.append("g").classed("axis y",!0),C.append("g").classed("g-connections",!0),C.append("g").classed("g-metrics",!0),C.append("g").classed("g-events",!0);const N=Mt(this.elContainer).select("svg.timeline-fixed"),I=this.timelineWidth<730,b=I?d=>d.split(" ")[0]:d=>d;this.svgFixed=N,N.style("width","100%").style("height","100").attr("viewBox",`0 0 ${this.timelineWidth} 100`);const U=this.isSmallScreen?22:25;N.selectAll("rect.country-name-bg").data(Et).join("rect").classed("country-name-bg",!0).attr("width",d=>Math.max(40,Ft(b(d),U,"'InterFace-Bold'"))).attr("height",I?d=>d.indexOf(" ")>-1?50:30:30).attr("rx",12).attr("fill","#ddd").attr("fill-opacity",.75).attr("x",d=>this.xScale(d)+this.xScale.bandwidth()/2-Math.max(40,Ft(b(d),U,"'InterFace-Bold'"))/2).attr("y",10);const F=N.selectAll("text.country-name").data(Et).join("text").attr("class","country-name").attr("text-anchor","middle").attr("font-weight","bold").attr("font-size",this.isSmallScreen?"15px":"18px").attr("y",30);I?F.selectAll("tspan").data(function(d){return d.split(" ").map(T=>({text:T,country:d}))}).join("tspan").attr("x",(d,T)=>this.xScale(d.country)+this.xScale.bandwidth()/2).attr("y",(d,T)=>30+T*20).text(d=>d.text):F.attr("x",(d,T)=>this.xScale(d)+this.xScale.bandwidth()/2).text(d=>d)};dt.prototype.render=function(){const t=this.svg;t.select(".g-main");const e=t.select("g.axis.y").attr("font-size","14px"),{aMonths:n,aWeeks:r}=this.data;e.selectAll("line.axis-tick").data(n).join("line").classed("axis-tick",!0).attr("x1",0).attr("x2",this.timelineWidth).attr("y1",p=>this.yScale(p)).attr("y2",p=>this.yScale(p)).attr("stroke","#eee").attr("stroke-width","1");const i=gt("%-m/%-d/%Y"),a=gt("%B"),o=gt("%Y");e.selectAll("text.axis-tick-label-month").data(n).join("text").classed("axis-tick-label",!0).attr("stroke","#888").attr("fill","#888").attr("font-size","16px").attr("y",p=>this.yScale(p)+pn/2).text(p=>a(p)),e.selectAll("text.axis-tick-label-year").data(n).join("text").classed("axis-tick-label",!0).attr("stroke","#888").attr("fill","#888").attr("font-size","12px").attr("y",p=>this.yScale(p)+pn/2+20).text(p=>o(p)),e.append("defs").html(`<pattern id="program-pattern" patternUnits="userSpaceOnUse" width="7.5" height="7.5" patternTransform="rotate(45)">
            <line x1="0" y="0" x2="0" y2="7.5" stroke="#FDE8BF" stroke-width="3" />
        </pattern>`);const s=e.append("g").classed("programme",!0),u=this.programmes;s.selectAll("rect.program-rect").data(u).join("rect").classed("program-rect",!0).attr("x",(p,k)=>100).attr("y",(p,k)=>this.yScale(new Date(p.startDate))).attr("width",this.timelineWidth).attr("height",(p,k)=>this.yScale(new Date(p.endDate))-this.yScale(new Date(p.startDate))).attr("fill",(p,k)=>"url(#program-pattern)"),s.selectAll("rect.program-label-bg").data(u).join("rect").classed("program-label-bg",!0).attr("width",p=>{const k=Ft(p.name,18,"'InterFace-Bold'");return p.width=k,k}).attr("height",25).attr("rx",12).attr("fill",p=>p.colour).attr("fill-opacity",.85).attr("transform",p=>{const y=p.width/2+this.yScale(new Date(p.startDate))+(this.yScale(new Date(p.endDate))-this.yScale(new Date(p.startDate)))/2;return`translate(${87.5}, ${y})rotate(-90)`}),s.selectAll("text.program-label").data(u).join("text").classed("program-label",!0).attr("text-anchor","middle").attr("font-weight","bold").attr("fill","#444").attr("transform",p=>{const y=this.yScale(new Date(p.startDate))+(this.yScale(new Date(p.endDate))-this.yScale(new Date(p.startDate)))/2;return`translate(${104.5}, ${y})rotate(-90)`}).text(p=>p.name);const l=e.append("g").classed("variants",!0),f=this.variants;l.selectAll("text.variant-label").data(f).join("text").classed("variant-label",!0).attr("text-anchor","start").attr("font-weight","bold").attr("font-size","20px").attr("fill-opacity",.75).attr("fill",Si).attr("transform",p=>{const y=this.yScale(new Date(p.startDate));return`translate(${0}, ${y})`}).text(p=>p.name);const h=t.select(".g-metrics"),g=this.getMetricData(),w=h.selectAll("circle.metric").data(g);w.exit().remove(),w.join("circle").classed("metric",!0).attr("fill-opacity",.2).attr("stroke-opacity",.5).attr("cx",this.metricXScale).attr("cy",p=>this.yScale(p.dt)).attr("r",p=>this.circleArea(p.metricValue)).attr("fill",p=>p.fill).attr("stroke",p=>p.fill);const x=t.select(".g-events"),C=this.aEventsData,N=this.isSmallScreen,I=N?25:30,b=I/2/10.483,U=14+5,F=x.selectAll("g.event").data(C);F.exit().remove();const d=F.join("g").classed("event",!0).attr("transform",p=>`translate(${(p.EventType==1?-I:I)+this.xScale(p.country)+this.xScale.bandwidth()/2}, ${this.yScale(p.dt)})`);d.append("circle").attr("cx",0).attr("cy",0).attr("r",I/2).attr("fill","#FFFFFF").on("mouseover",(p,k)=>{this.dispatch.call("highlightDate",this,k.date)}).on("mouseout",(p,k)=>{this.dispatch.call("highlightDate",this,"01/01/1900")});const T=d.append("g").classed("highlight-element",!0).attr("opacity",0);T.append("rect").attr("x",p=>-p.eventDateWidth/2).attr("y",U).attr("rx","8").attr("fill","#333333").attr("width",p=>p.eventDateWidth).attr("height",15),T.append("text").attr("transform",`translate(0, ${U+11})`).attr("font-family","'InterFace-Bold'").attr("font-size","12px").attr("font-weight","bold").attr("fill","#FFFFFF").attr("text-anchor","middle").text(p=>p.date),T.filter(p=>!!p.eventText).append("rect").classed("event-description-bg",!0).attr("y",U+18).attr("rx",4).attr("fill","#fff").attr("fill-opacity",.85).attr("stroke","#444").attr("stroke-width","0.4").attr("width",p=>{const k=xu(p.eventText,this.xScale.bandwidth(),14,"'InterFace-Bold'"),y=Ji(k,m=>m.length),_=k[y.indexOf(Tr(y))],$=Ft(_,14,"'InterFace-Bold'");return p.eventDescriptionText=k,p.eventDescriptionWidth=$+20,p.eventDescriptionWidth}).attr("height",p=>p.eventDescriptionText.length*10*1.125+10).attr("x",p=>-p.eventDescriptionWidth/2),T.filter(p=>!!p.eventText).append("text").attr("transform",`translate(0, ${U+32})`).attr("font-family","'InterFace-Regular'").attr("font-size","14px").attr("text-anchor","middle").attr("fill","#333").selectAll("tspan").data(p=>p.eventDescriptionText).join("tspan").attr("x",0).attr("y",(p,k)=>k*10*1.125).text(p=>p),this.dispatch.on("highlightDate.event",p=>{if(this._lastHighlightDate==p)return;this._lastHighlightDate=p,d.selectAll(".highlight-element").interrupt("highlight").attr("opacity",0);const k=d.filter(y=>y.date==p);k.raise(),k.selectChild(".highlight-element").transition("highlight").duration(450).attr("opacity",1)}),d.filter(p=>p[`Direction ${p.country}`]==="closed"||p["Direction vaccine programme"]==="closed").append("path").attr("fill","#333333").attr("d","M0,10.483C-5.78,10.483-10.483,5.78-10.483,0c0-5.78,4.702-10.482,10.483-10.482C5.78-10.483,10.483-5.78,10.483,0C10.483,5.78,5.78,10.483,0,10.483z M0-8.482c-4.677,0-8.483,3.805-8.483,8.482S-4.677,8.482,0,8.482S8.482,4.677,8.482,0S4.678-8.482,0-8.482z");const z=d.filter(p=>p[`Direction ${p.country}`]==="open").append("g").attr("transform",function(p){var k=Math.random()*360;return"rotate("+k+")"});z.append("path").attr("fill","#333333").attr("d","M0.235-10.408c1.269,0.067,2.453,0.418,3.508,0.978l0.637-1.929c-1.227-0.6-2.592-0.969-4.04-1.046c-0.762-0.04-1.507,0.007-2.231,0.125l0.254,1.987C-1.03-10.397-0.405-10.441,0.235-10.408z"),z.append("path").attr("fill","#333333").attr("d","M10.599-1.105c-0.036,0.154-0.085,0.301-0.129,0.451l1.89,0.657c0.066-0.217,0.136-0.432,0.188-0.657c0.024-0.102,0.034-0.204,0.055-0.306l-1.953-0.424C10.63-1.291,10.62-1.198,10.599-1.105z"),z.append("path").attr("fill","#333333").attr("d","M-8.229-10.496l-1.117-1.659c-0.431,0.323-0.841,0.672-1.218,1.056l1.846,1.007C-8.56-10.233-8.398-10.367-8.229-10.496z"),z.append("path").attr("fill","#333333").attr("d","M7.972-5.686l0.84-2.118C8.133-8.545,7.351-9.186,6.487-9.707L5.322-8.074C6.364-7.472,7.269-6.659,7.972-5.686z"),z.append("path").attr("fill","#333333").attr("d","M9.401-2.263l1.958,0.401c0.468-2.482,0.015-4.936-1.129-7.003L8.917-7.002C9.514-5.545,9.705-3.911,9.401-2.263z"),z.append("path").attr("fill","#333333").attr("d","M-2.055-11.202l-0.493-1.942c-1.466,0.425-2.786,1.163-3.905,2.127l1.228,1.578C-4.32-10.235-3.247-10.846-2.055-11.202z"),z.append("path").attr("fill","#333333").attr("d","M0.01,9.294c-0.396,0.07-0.789,0.101-1.18,0.115l0.63,1.967c0.299-0.027,0.598-0.059,0.899-0.113c0.067-0.012,0.129-0.032,0.195-0.045L0.343,9.217C0.232,9.242,0.124,9.274,0.01,9.294z"),z.append("path").attr("fill","#333333").attr("d","M1.16,10.126l0.054,2.011c3.711-0.432,6.755-2.772,8.255-5.94L7.576,5.526C6.359,7.948,4.012,9.733,1.16,10.126z"),z.append("path").attr("fill","#333333").attr("d","M-3.004,11.612l-0.564,1.918c0.626,0.177,1.273,0.3,1.941,0.357l-0.277-2.046C-2.28,11.788-2.647,11.712-3.004,11.612z"),z.append("path").attr("fill","#333333").attr("d","M11.372,0.473C10.603,1.739,9.55,2.738,8.334,3.43l1.204,1.609c1.385-0.832,2.589-1.99,3.488-3.439L11.372,0.473z"),z.append("path").attr("fill","#333333").attr("d","M-7.112-7.54l-1.862-0.978c-0.727,0.765-1.335,1.641-1.806,2.596l1.662,1.166C-8.643-5.817-7.958-6.762-7.112-7.54z"),z.append("path").attr("fill","#333333").attr("d","M-10.269-5.165l-1.638-1.198c-0.587,1.132-0.98,2.38-1.118,3.706l1.986,0.271C-10.944-3.373-10.674-4.307-10.269-5.165z"),z.append("path").attr("fill","#333333").attr("d","M-10.251,1.622c-0.109-0.243-0.202-0.489-0.286-0.736l-1.921,0.572c0.11,0.33,0.236,0.657,0.381,0.981c1.07,2.39,2.934,4.175,5.139,5.203l0.777-1.84C-7.916,4.966-9.397,3.532-10.251,1.622z"),z.append("path").attr("fill","#333333").attr("d","M-8.644,7.061l-1.233,1.571c1.544,1.304,3.452,2.158,5.512,2.406l0.26-1.982C-5.805,8.857-7.38,8.148-8.644,7.061z");const B=d.filter(p=>p[`Icon ${p.country}`]=="lockdown");B.filter(p=>p[`Direction ${p.country}`]=="open").append("path").attr("fill","#333333").attr("d","M3.17-1.18H2.647v-1.954c0-1.459-1.188-2.646-2.648-2.646c-1.459,0-2.646,1.187-2.646,2.646v0.937h1.257v-0.937c0-0.766,0.623-1.389,1.388-1.389c0.767,0,1.39,0.623,1.39,1.389v1.954h-4.56c-0.28,0-0.509,0.229-0.509,0.509v5.028c0,0.28,0.229,0.509,0.509,0.509h6.34c0.28,0,0.509-0.229,0.509-0.509v-5.028C3.68-0.951,3.45-1.18,3.17-1.18z M0.341,2.092l0.229,1.09h-1.14l0.229-1.09c-0.275-0.129-0.466-0.407-0.466-0.731c0-0.446,0.361-0.807,0.807-0.807c0.446,0,0.807,0.361,0.807,0.807C0.807,1.685,0.616,1.964,0.341,2.092z"),B.filter(p=>p[`Direction ${p.country}`]=="closed").append("path").attr("fill","#333333").attr("d","M3.171-1.563H2.647v-1.3C2.647-4.322,1.46-5.51,0-5.51c-1.459,0-2.646,1.187-2.646,2.646v1.3H-3.17c-0.28,0-0.509,0.229-0.509,0.509v5.027c0,0.28,0.229,0.509,0.509,0.509h6.34c0.28,0,0.509-0.229,0.509-0.509v-5.027C3.68-1.334,3.451-1.563,3.171-1.563z M-1.389-2.863c0-0.766,0.623-1.389,1.388-1.389c0.767,0,1.39,0.623,1.39,1.389v1.3h-2.779V-2.863z M0.341,1.709l0.229,1.09h-1.14l0.229-1.09C-0.615,1.58-0.807,1.302-0.807,0.978c0-0.446,0.361-0.807,0.807-0.807s0.807,0.361,0.807,0.807C0.807,1.302,0.616,1.58,0.341,1.709z");const M=d.filter(p=>p[`Icon ${p.country}`]=="schools");M.append("path").attr("fill","#333333").attr("d","M5.485-0.985c0.148-0.074,0.148-0.26,0-0.335L0.324-3.909C0.24-3.951,0.147-3.972,0.053-3.972c-0.094,0-0.187,0.021-0.271,0.063L-5.378-1.32c-0.148,0.074-0.148,0.26,0,0.335l5.161,2.589c0.084,0.042,0.177,0.063,0.271,0.063c0.093,0,0.187-0.021,0.271-0.063L5.485-0.985z"),M.append("path").attr("fill","#333333").attr("d","M4.182-1.434l0.003,0.971l0.002,1.248c-0.184,0.032-0.33,0.11-0.324,0.228v2.252c0,0.108,0.087,0.195,0.195,0.195h0.642c0.108,0,0.195-0.087,0.195-0.195V1.013c-0.007-0.127-0.151-0.202-0.33-0.231L4.56-1.556"),M.append("path").attr("fill","#333333").attr("d","M0.02,2.48c-0.209,0-0.465-0.145-0.519-0.175l-2.477-1.384v2.326c0,0.127,0.065,0.245,0.172,0.314C-1.965,4.1-0.993,4.385,0.007,4.385c1,0,1.972-0.284,2.812-0.822C2.926,3.494,2.99,3.375,2.99,3.248V0.922L0.525,2.278C0.471,2.308,0.201,2.48,0.02,2.48z"),d.filter(p=>p[`Icon ${p.country}`]=="travel").append("path").attr("fill","#333333").attr("d","M6.156-1.322C5.874-1.441,5.836-1.433,5.411-1.528C4.986-1.623,4.519-1.519,4.519-1.519L2.363-0.906C1.137-1.423-1.874-2.695-2.137-2.807c-0.33-0.141-0.494-0.141-0.636-0.094c-0.141,0.048-0.565,0.188-0.755,0.307c-0.189,0.118-0.541,0.283-0.352,0.401c0.138,0.086,2.055,1.46,3.073,2.19l-1.824,0.519c0,0-0.448,0.213-0.706,0.047c-0.26-0.165-0.566-0.424-0.919-0.707C-4.61-0.427-4.704-0.592-5.011-0.498c-0.306,0.094-1.225,0.353-1.108,0.494C-6,0.138-4.092,2.848-4.092,2.848l9.111-2.614c0,0,0.738-0.379,0.974-0.59c0.235-0.212,0.471-0.471,0.565-0.589C6.651-1.064,6.44-1.205,6.156-1.322z");const v=d.filter(p=>p[`Icon ${p.country}`]=="work");v.append("path").attr("fill","#333333").attr("d","M-3.957-0.973c0.833,0.324,2.179,0.709,3.862,0.709c2.321,0,4.126-0.73,4.966-1.145V-2.94c0-0.219-0.177-0.396-0.396-0.396h-8.95c-0.219,0-0.396,0.177-0.396,0.396v1.553C-4.639-1.265-4.332-1.118-3.957-0.973z"),v.append("path").attr("fill","#333333").attr("d","M-0.095,0.188c-2.215,0-3.873-0.621-4.776-1.066v3.714c0,0.213,0.172,0.385,0.385,0.385h8.971c0.213,0,0.385-0.172,0.385-0.385v-3.739C3.927-0.459,2.165,0.188-0.095,0.188z"),v.append("path").attr("fill","#333333").attr("d","M2-3.632H1.278c0-0.586-0.43-0.883-1.278-0.883s-1.278,0.297-1.278,0.883H-2c0-1.005,0.748-1.605,2-1.605C1.253-5.237,2-4.637,2-3.632z"),v.append("path").attr("fill","#333333").attr("d","M0.662,0.822c0,0.124-0.102,0.226-0.226,0.226h-0.872c-0.124,0-0.226-0.102-0.226-0.226V-0.76c0-0.124,0.102-0.226,0.226-0.226h0.872c0.124,0,0.226,0.102,0.226,0.226V0.822z"),v.append("path").attr("fill","#333333").attr("d","M0.436,1.273h-0.872c-0.249,0-0.451-0.202-0.451-0.451V-0.76c0-0.249,0.202-0.451,0.451-0.451h0.872c0.249,0,0.451,0.202,0.451,0.451v1.582C0.887,1.071,0.685,1.273,0.436,1.273z M0.436,0.822v0.226V0.822L0.436,0.822L0.436,0.822z M-0.436-0.76v1.582h0.871L0.436-0.76H-0.436z");const S=d.filter(p=>p[`Icon ${p.country}`]=="shops");S.append("path").attr("fill","#333333").attr("d","M5.24-2.008H4.314l0.045,0.072c0.293,0.471,0.149,1.091-0.322,1.384C3.566-0.259,2.946-0.403,2.652-0.874L1.946-2.008h-3.891l-0.707,1.134c-0.294,0.471-0.914,0.615-1.385,0.322c-0.471-0.293-0.615-0.913-0.322-1.384l0.045-0.072H-5.24c-0.29,0-0.524,0.235-0.524,0.524v0.917c0,0.289,0.235,0.524,0.524,0.524h0.308l1.172,4.136C-3.613,4.611-3.359,4.99-2.864,4.99h5.728c0.496,0,0.75-0.402,0.897-0.897l1.172-4.136H5.24c0.289,0,0.524-0.235,0.524-0.524v-0.917C5.764-1.774,5.53-2.008,5.24-2.008z M-2.293,4.298c-0.235,0.019-0.441-0.155-0.461-0.39l-0.364-3.08c-0.019-0.235,0.155-0.441,0.39-0.461c0.235-0.02,0.441,0.155,0.461,0.39l0.364,3.08C-1.883,4.073-2.058,4.279-2.293,4.298z M-0.753,4.298c-0.236,0.007-0.433-0.178-0.44-0.413l-0.14-3.093C-1.341,0.557-1.156,0.36-0.92,0.352c0.236-0.007,0.433,0.178,0.44,0.413l0.14,3.093C-0.333,4.094-0.518,4.291-0.753,4.298z M1.194,3.885c-0.007,0.235-0.205,0.42-0.44,0.413C0.518,4.291,0.333,4.094,0.34,3.858l0.14-3.093C0.487,0.53,0.684,0.345,0.92,0.352c0.235,0.008,0.42,0.205,0.413,0.44L1.194,3.885z M2.754,3.908c-0.02,0.235-0.226,0.41-0.461,0.39c-0.235-0.02-0.409-0.226-0.39-0.461l0.364-3.08c0.02-0.235,0.226-0.41,0.461-0.39c0.235,0.019,0.409,0.226,0.39,0.461L2.754,3.908z"),S.append("path").attr("fill","#333333").attr("d","M-3.829-0.911c0.28,0.174,0.648,0.089,0.823-0.191l1.851-2.975c0.174-0.28,0.089-0.648-0.191-0.822c-0.28-0.174-0.648-0.089-0.822,0.191L-4.02-1.733C-4.195-1.453-4.109-1.085-3.829-0.911z"),S.append("path").attr("fill","#333333").attr("d","M1.347-4.899c-0.28,0.174-0.366,0.542-0.191,0.822l1.851,2.975c0.175,0.28,0.543,0.365,0.823,0.191c0.28-0.174,0.365-0.542,0.191-0.822L2.169-4.708C1.994-4.988,1.626-5.074,1.347-4.899z"),d.filter(p=>p[`Icon ${p.country}`]=="hospitality").append("path").attr("fill","#333333").attr("d","M1.738,4.718c0.203,0,0.374-0.158,0.391-0.36l0.422-5.097C2.623-1.594,3.168-1.656,2.828-3.14C2.788-3.319,2.781-3.505,2.796-3.689c0.001-0.009,0.108-1.168,0.108-1.177c0-0.09-0.073-0.166-0.166-0.166h-5.563c-0.098,0-0.174,0.084-0.165,0.182c0.117,1.204,0.158,1.371,0.079,1.719C-3.098-2.31-3.067-2.034-2.768-1.303c0.07,0.172,0.117,0.337,0.136,0.565l0.422,5.097c0.017,0.202,0.189,0.36,0.391,0.36h1.778H1.738z M2.182-3.327h-4.444l-0.09-1.105h4.612L2.182-3.327z");const E=d.filter(p=>p[`Icon ${p.country}`]=="gatherings");E.append("path").attr("fill","#333333").attr("d","M0-2.131c0.55,0,1.052,0.208,1.432,0.548c0.014-0.339,0.107-0.658,0.262-0.94C1.403-2.808,1.058-2.995,0.68-3.093c0.503-0.25,0.849-0.77,0.849-1.37c0-0.845-0.685-1.529-1.529-1.529S-1.53-5.308-1.53-4.463c0,0.6,0.346,1.12,0.849,1.37c-0.378,0.098-0.723,0.285-1.014,0.571c0.154,0.281,0.248,0.6,0.262,0.94C-1.052-1.923-0.55-2.131,0-2.131z"),E.append("path").attr("fill","#333333").attr("d","M1.818,1.167c-0.012,0.02-0.025,0.039-0.038,0.058c0.326,0.231,0.604,0.534,0.826,0.899c0.219,0.362,0.382,0.784,0.49,1.263h2.279c0.475,0,0.841-0.418,0.781-0.889C5.955,0.937,5.214,0.126,4.26-0.12l0,0l0,0c0.031-0.016,0.062-0.032,0.092-0.05c0.03-0.018,0.06-0.036,0.089-0.056c0.029-0.02,0.057-0.04,0.084-0.062c0.027-0.022,0.054-0.044,0.08-0.067C4.644-0.391,4.68-0.428,4.715-0.466C4.737-0.49,4.757-0.514,4.777-0.539C4.781-0.544,4.786-0.55,4.79-0.556C4.809-0.58,4.827-0.605,4.844-0.63c0.167-0.245,0.265-0.541,0.265-0.86c0-0.792-0.602-1.443-1.373-1.521C3.685-3.017,3.632-3.02,3.58-3.02c-0.132,0-0.26,0.017-0.382,0.048C3.149-2.959,3.101-2.944,3.054-2.927C3.03-2.919,3.007-2.909,2.984-2.9C2.435-2.668,2.05-2.124,2.05-1.491c0,0.263,0.066,0.51,0.183,0.726C2.258-0.719,2.285-0.674,2.315-0.63c0.069,0.101,0.149,0.193,0.24,0.275c0.013,0.012,0.026,0.023,0.039,0.034C2.687-0.243,2.789-0.175,2.9-0.12l0,0l0,0C2.626-0.05,2.369,0.068,2.139,0.236C2.105,0.567,1.996,0.885,1.818,1.167z"),E.append("path").attr("fill","#333333").attr("d","M-2.9-0.12L-2.9-0.12L-2.9-0.12c0.031-0.016,0.062-0.032,0.092-0.05c0.03-0.018,0.06-0.036,0.089-0.056c0.029-0.02,0.057-0.04,0.084-0.062c0.027-0.022,0.054-0.044,0.08-0.067c0.039-0.035,0.076-0.072,0.111-0.111c0.021-0.023,0.041-0.048,0.061-0.072c0.005-0.006,0.009-0.012,0.014-0.018C-2.35-0.58-2.332-0.605-2.315-0.63c0.167-0.245,0.265-0.541,0.265-0.86c0-0.607-0.354-1.132-0.866-1.379C-2.939-2.88-2.961-2.89-2.984-2.9C-3.03-2.919-3.077-2.936-3.125-2.951c-0.048-0.015-0.097-0.027-0.147-0.038c-0.025-0.005-0.05-0.01-0.075-0.013C-3.423-3.014-3.5-3.02-3.58-3.02c-0.053,0-0.105,0.003-0.156,0.008c-0.051,0.005-0.102,0.013-0.152,0.023c-0.075,0.015-0.147,0.036-0.218,0.062C-4.129-2.919-4.152-2.909-4.175-2.9c-0.114,0.048-0.222,0.11-0.32,0.184c-0.02,0.015-0.039,0.03-0.058,0.045c-0.34,0.281-0.557,0.705-0.557,1.18c0,0.319,0.098,0.615,0.265,0.86c0.017,0.025,0.035,0.05,0.054,0.074c0.005,0.006,0.009,0.012,0.014,0.018c0.02,0.025,0.04,0.049,0.061,0.072c0.058,0.065,0.122,0.124,0.19,0.178c0.055,0.043,0.112,0.083,0.173,0.118c0.03,0.018,0.061,0.034,0.092,0.05l0,0l0,0c-0.092,0.024-0.181,0.053-0.269,0.087c-0.028,0.011-0.055,0.022-0.082,0.034C-4.645,0.016-4.68,0.033-4.714,0.05c-0.048,0.024-0.096,0.05-0.142,0.077c-0.031,0.019-0.062,0.038-0.092,0.058C-4.995,0.216-5.041,0.25-5.086,0.286C-5.112,0.307-5.138,0.328-5.163,0.35C-5.193,0.375-5.222,0.401-5.25,0.429c-0.041,0.039-0.08,0.079-0.119,0.122C-5.421,0.608-5.47,0.668-5.518,0.733c-0.024,0.032-0.047,0.065-0.07,0.099C-5.633,0.9-5.677,0.971-5.718,1.046c-0.032,0.058-0.061,0.118-0.09,0.18C-5.972,1.578-6.091,2.001-6.155,2.5c-0.06,0.471,0.306,0.888,0.781,0.888h2.278c0.107-0.479,0.271-0.901,0.49-1.263c0.221-0.365,0.5-0.668,0.826-0.899c-0.013-0.019-0.026-0.039-0.038-0.058c-0.179-0.282-0.288-0.601-0.321-0.931C-2.37,0.068-2.626-0.05-2.9-0.12z"),E.append("path").attr("fill","#333333").attr("d","M0.68,1.389L0.68,1.389L0.68,1.389c0.031-0.016,0.062-0.032,0.092-0.05c0.03-0.018,0.06-0.036,0.089-0.056c0.029-0.02,0.057-0.04,0.084-0.062C0.973,1.2,0.999,1.177,1.025,1.154c0.31-0.28,0.504-0.685,0.504-1.135c0-0.027-0.001-0.055-0.002-0.082C1.505-0.478,1.317-0.85,1.028-1.113C0.974-1.162,0.916-1.208,0.855-1.249C0.814-1.276,0.772-1.302,0.729-1.326C0.512-1.443,0.264-1.51,0-1.51c-0.264,0-0.512,0.067-0.729,0.185c-0.043,0.024-0.085,0.049-0.126,0.077c-0.061,0.041-0.119,0.087-0.173,0.136C-1.065-1.08-1.099-1.045-1.132-1.009c-0.049,0.054-0.095,0.112-0.136,0.173C-1.296-0.795-1.321-0.753-1.345-0.71c-0.105,0.194-0.17,0.414-0.182,0.647C-1.529-0.036-1.53-0.008-1.53,0.019c0,0.188,0.034,0.367,0.096,0.533C-1.378,0.702-1.3,0.841-1.203,0.964c0.022,0.027,0.044,0.054,0.067,0.08c0.035,0.039,0.072,0.076,0.111,0.111C-1,1.177-0.973,1.2-0.946,1.221c0.027,0.022,0.055,0.042,0.084,0.062c0.029,0.02,0.058,0.038,0.089,0.056c0.03,0.018,0.061,0.034,0.092,0.05l0,0l0,0c-0.28,0.073-0.542,0.194-0.778,0.368C-1.487,1.78-1.516,1.802-1.545,1.826c-0.238,0.196-0.446,0.451-0.614,0.77c-0.033,0.063-0.066,0.129-0.096,0.197c-0.018,0.041-0.036,0.084-0.053,0.127c-0.051,0.129-0.097,0.267-0.136,0.414c-0.005,0.018-0.009,0.036-0.013,0.054l0,0c-0.049,0.192-0.089,0.399-0.117,0.62c0,0.003-0.001,0.005-0.001,0.008c-0.059,0.468,0.31,0.881,0.782,0.881h3.588c0.475,0,0.841-0.418,0.781-0.889C2.375,2.447,1.635,1.636,0.68,1.389z"),d.filter(p=>p[`Icon ${p.country}`]=="healthcare").append("path").attr("fill","#333333").attr("d","M6.147,1.163H1.913c-0.139,0-0.267-0.079-0.329-0.204L1.317,0.426L0.562,2.458c-0.054,0.144-0.191,0.24-0.345,0.24c-0.002,0-0.005,0-0.007,0C0.054,2.695-0.083,2.593-0.132,2.445l-0.826-2.504l-0.398,0.991c-0.056,0.139-0.191,0.231-0.341,0.231h-1.378c-0.203,0-0.368-0.165-0.368-0.368c0-0.203,0.165-0.368,0.368-0.368h1.129l0.681-1.694c0.058-0.143,0.201-0.236,0.353-0.23c0.154,0.005,0.289,0.106,0.337,0.252l0.812,2.463l0.685-1.844c0.051-0.137,0.179-0.231,0.325-0.239c0.146-0.009,0.283,0.072,0.349,0.203L2.14,0.428h2.758c0.185-0.467,0.293-0.96,0.291-1.476C5.182-2.42,4.397-3.542,2.946-3.812C0.723-4.227,0.073-1.958,0.073-1.958S-0.577-4.227-2.8-3.812c-1.45,0.27-2.235,1.392-2.243,2.764C-5.061,2.489,0.073,5.01,0.073,5.01s2.6-1.278,4.093-3.29h1.961c0.154,0,0.279-0.125,0.279-0.28C6.407,1.293,6.292,1.173,6.147,1.163z");const W=d.filter(p=>p[`Icon ${p.country}`]=="masks");W.append("path").attr("fill","#333333").attr("d","M5.664-2.259C5.255-2.361,4.542-1.952,4.103-1.183v2.177c0.672-0.299,1.899-1.053,1.899-2.579C6.002-1.853,5.943-2.189,5.664-2.259z"),W.append("path").attr("fill","#333333").attr("d","M-5.664-2.259c-0.279,0.07-0.338,0.406-0.338,0.675c0,1.511,1.229,2.271,1.899,2.574v-2.173C-4.542-1.952-5.255-2.362-5.664-2.259z"),W.append("path").attr("fill","#333333").attr("d","M5.826-2.908C5.098-3.089,4.178-2.56,3.605-1.657C3.193-1.752,2.316-1.955,1.526-2.129C1.257-2.189,1.05-2.25,0.866-2.304C0.559-2.394,0.316-2.466,0-2.466c-0.315,0-0.558,0.071-0.866,0.162c-0.183,0.054-0.391,0.115-0.66,0.174c-0.79,0.175-1.667,0.377-2.079,0.473C-4.178-2.56-5.098-3.089-5.826-2.908C-6.08-2.844-6.67-2.588-6.67-1.584c0,2.206,2.054,3.111,2.649,3.327c0.248,0.575,1.279,2.519,3.979,2.858C-0.028,4.603-0.014,4.604,0,4.604s0.028-0.001,0.042-0.003c2.701-0.34,3.732-2.283,3.98-2.858C4.616,1.528,6.67,0.622,6.67-1.584C6.67-2.588,6.08-2.844,5.826-2.908z M-4.103,0.991c-0.67-0.303-1.899-1.064-1.899-2.574c0-0.27,0.059-0.605,0.338-0.675c0.409-0.103,1.122,0.307,1.561,1.077V0.991z M-1.278-0.566h2.556c0.184,0,0.334,0.15,0.334,0.334s-0.15,0.334-0.334,0.334h-2.556c-0.184,0-0.334-0.15-0.334-0.334S-1.462-0.566-1.278-0.566z M0.874,2.756h-1.748c-0.184,0-0.334-0.15-0.334-0.334c0-0.185,0.15-0.334,0.334-0.334h1.748c0.185,0,0.334,0.149,0.334,0.334C1.208,2.607,1.059,2.756,0.874,2.756z M2.085,1.429h-4.171c-0.184,0-0.334-0.15-0.334-0.334c0-0.185,0.15-0.334,0.334-0.334h4.171c0.184,0,0.334,0.15,0.334,0.334C2.419,1.28,2.27,1.429,2.085,1.429z M4.103,0.995v-2.177c0.439-0.77,1.152-1.179,1.561-1.077c0.279,0.07,0.338,0.406,0.338,0.675C6.002-0.058,4.775,0.696,4.103,0.995z");const R=d.filter(p=>p[`Icon ${p.country}`]=="vaccine"||p["Icon vaccine programme"]==="vaccine");R.append("path").attr("fill","#333333").attr("d","M-0.156-4.062c-0.199-0.199-0.521-0.199-0.72,0c-0.199,0.199-0.199,0.522,0,0.72l0.713,0.713l-3.332,3.332l0.637,1.543l-1.576,1.576c-0.03,0.03-0.045,0.071-0.042,0.113l0.06,0.883c0.004,0.057,0.041,0.106,0.094,0.127c0.017,0.006,0.034,0.009,0.051,0.009c0.038,0,0.075-0.015,0.103-0.043l1.987-1.987l1.543,0.637l3.332-3.332l0.713,0.713c0.099,0.099,0.23,0.149,0.36,0.149c0.13,0,0.261-0.05,0.36-0.149c0.199-0.199,0.199-0.522,0-0.72L-0.156-4.062z M-0.844,2.531l-0.815-0.336l0.327-0.327l-0.831-0.831l0.472-0.472l0.831,0.831l0.498-0.498l-0.831-0.83l0.472-0.472l0.831,0.83L0.607-0.07l-0.831-0.831l0.472-0.472l0.831,0.831l0.422-0.422l0.575,0.575L-0.844,2.531z"),R.append("path").attr("fill","#333333").attr("d","M5.37-2.515l-2.79-2.79c-0.17-0.171-0.447-0.171-0.618,0c-0.171,0.17-0.171,0.447,0,0.617l0.32,0.32L1.26-3.345l0.618,0.617L2.9-3.75l0.954,0.954L2.832-1.773l0.617,0.617l1.022-1.022l0.281,0.281c0.085,0.085,0.197,0.128,0.309,0.128c0.112,0,0.224-0.043,0.309-0.128C5.54-2.068,5.54-2.344,5.37-2.515z"),d.selectAll("path").style("transform",`scale(${b}, ${b})`);const ot=Math.floor(this.timelineHeight/r.length),j=Mt(this.elContainer).select(".scroller");Wn("div.axis-tick-week").remove(),e.selectAll("line.axis-tick-week").data(r).join("line").classed("axis-tick-week",!0).attr("stroke","blue").attr("x1",0).attr("x2",this.timelineWidth).attr("y1",p=>this.yScale(p)).attr("y2",p=>this.yScale(p)).each(function(p){const k=this.getBoundingClientRect().top+window.scrollY;j.append("div").classed("axis-tick-week",!0).style("top",`${k}px`).style("height",`${ot}px`).html(i(p))});const ct=t.select(".g-connections"),st=wu().x(p=>this.xScale(p.country)+this.xScale.bandwidth()/2+(p.EventType==1?-20:20)).y(p=>this.yScale(p.dt)),Le=jt("%d/%m/%y"),Ie=this.linkedEvents.reduce((p,k)=>{const y=[];return Et.forEach(_=>{k[_]&&y.push({country:_,date:k[_],dt:Le(k[_]),EventType:k[`${_} EventType`]})}),p.push(y),p},[]);ct.selectAll("path.connection").data(Ie).join("path").classed("connection",!0).attr("stroke","#aaa").attr("stroke-width",1).attr("fill","none").attr("stroke-dasharray","6 4").attr("d",st),this.scroller&&this.scroller.destroy();const ie=ku();this.scroller=ie,ie.setup({step:"div.axis-tick-week",debug:!1,offset:this.scrollOffset||.5}).onStepEnter(p=>{const{element:k,index:y,direction:_}=p;this.setEventHighlightDate(r[y]),Wn(".axis-tick-week.active").classed("active",!1),Mt(k).classed("active",!0)}).onStepExit(p=>{})};dt.prototype.renderLegend=function(){const t=Sn(".0s"),e=Mt(this.elContainer).select(".timeline-legend");e.selectAll("*").remove();const n=e.append("g"),r=this.circleArea.domain(),i=(r[1]-r[0])/3,a=Sr(r[0],r[1]+i,i).filter(l=>l);a.unshift(1);const o=2.5*this.circleArea(a[a.length-1]),c=Dn().domain(a).range([0,o*a.length*1.15]);n.selectAll("circle").data(a).join("circle").attr("cx",(l,f)=>c(l)+c.bandwidth()/2).attr("cy",20).attr("r",l=>Math.max(1,this.circleArea(l))).attr("fill",vt.silver).attr("stroke",vt.silver).attr("fill-opacity",.2).attr("stroke-opacity",.5).attr("stroke-width",2),n.selectAll("text").data(a).join("text").attr("x",(l,f)=>c(l)+c.bandwidth()/2).attr("y",o+10).attr("text-anchor","middle").text(l=>l<1?l.toFixed(2):t(Math.ceil(l))),this.timelineWidth<=dn?e.attr("viewBox",`10 -12 ${c.range()[1]} ${o*1.5}`).attr("height",o).attr("width",145):e.attr("viewBox",`0 0 ${c.range()[1]} ${75}`).attr("height",75).attr("width",220);const s=Mt(this.elContainer).select(".timeline-legend-desc");let u="";switch(this.metric){case"hospAdData":u="Number of people in hospital with covid-19, per 100 000 population";break;case"infectionsurvey":u="Average % of population testing positive";break;case"nationdeaths":u="Death registrations including covid-19, per 100 000 population";break}s.html(u)};dt.prototype.update=function(){const t=this.svg.select(".g-metrics"),e=this.getMetricData();this.circleArea.domain([0,Tr(e,r=>r.metricValue)]);const n=t.selectAll("circle.metric").data(e);n.exit().remove(),n.join("circle").classed("metric",!0).attr("fill-opacity",.2).attr("stroke-opacity",.5).attr("cx",this.metricXScale).attr("cy",r=>this.yScale(r.dt)).attr("r",r=>this.circleArea(r.metricValue)).attr("fill",r=>r.fill).attr("stroke",r=>r.fill),this.renderLegend()};dt.prototype.setEventHighlightDate=function(t){const n=Ne((i,a)=>i.dt-a).left(this.aEventsData,t),r=this.aEventsData[n];r&&(clearTimeout(this.eventHighlightTimeout),this.eventHighlightTimeout=setTimeout(()=>{this.dispatch.call("highlightDate",this,r.date)},0))};dt.prototype.getMetricScale=function(){return this.metric=="hospAdData"?t=>{const e=this.xScale(t.country)+this.xScale.bandwidth()/2,n=Math.random()*2-1;return this.jitterScale.range([0,t.metricValue*Nu]),e+this.jitterScale(n)}:t=>this.xScale(t.country)+this.xScale.bandwidth()/2};dt.prototype.updateMetric=function(t){this.metric=t,this.metricXScale=this.getMetricScale(),this.update()};dt.prototype.getMetricData=function(){const t=this.metric,e=this.metricData[t];if(!e)throw Error("No metric data for",t);const n=t=="hospAdData"?jt("%m/%d/%y"):jt("%d/%m/%y"),r=[];return Et.forEach(i=>{e.forEach(a=>{const o=n(a.date);r.push(Oe(ze({},a),{dt:o,country:i,fill:Si(a),metricValue:a[i]}))})}),r.sort((i,a)=>i.dt-a.dt),this.activeMetricData=r,r};let Ai=.5;try{const t=new URLSearchParams(location.search);Ai=Number(t.get("offset"))||.5}catch(t){}Promise.all([ue("./data/hospAdData.csv",se),ue("./data/infectionsurvey.csv",se),ue("./data/nationdeaths.csv",se),ue("./data/linkedEvents.csv",se)]).then(function(t){const e=new dt(document.querySelector("#app"),{scrollOffset:Ai,metric:"hospAdData",metricData:{hospAdData:t[0],infectionsurvey:t[1],nationdeaths:t[2]},programmes:[{name:"Clap for carers",startDate:"2020-03-26",endDate:"2020-05-28",colour:"rgb(246,210,120)"},{name:"Eat out to help out",startDate:"2020-08-01",endDate:"2020-08-31",colour:"rgb(246,210,120)"},{name:"Euro 2020 football championship",startDate:"2021-06-11",endDate:"2021-07-11",colour:"rgb(246,210,120)"}],variants:[{name:"Native Type",Variant:"native",startDate:"2020-02-29"},{name:"Alpha",Variant:"alpha",startDate:"2020-11-30"},{name:"Delta",Variant:"delta",startDate:"2021-05-31"},{name:"Omicron BA.1",Variant:"Omicron BA.1",startDate:"2021-11-30"},{name:"BA.2",Variant:"Omicron BA.2",startDate:"2022-01-31"}],linkedEvents:t[3]});Mt("#select-metric").on("change",function(n,r){const i=this.value;e.updateMetric(i)})});export{$u as __vite_legacy_guard};
//# sourceMappingURL=index.f41b7f72.js.map
